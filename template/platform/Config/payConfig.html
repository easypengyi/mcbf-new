{extend name="platform/new_base" /}
{block name="resources"/}
{/block}
{block name="main"}
<!-- page -->
<ul class="nav nav-tabs v-nav-tabs J-pay_list" role="tablist">

</ul>

<div class="tab-content pt-15">
    {if $pay_type == 1}
    <div role="tabpanel" class="tab-pane fade  in active" id="bpay" >
        <form class="form-horizontal form-validate1 widthFixedForm">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-8">
                    <div class="switch-inline"><input type="checkbox" id="bpay_is_use"><label for="bpay_is_use" class=""></label></div>
                    <p class="help-block">开启后微信公众号端、H5端、PC端均支持余额支付。</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="ppay" >
        <form class="form-horizontal form-validate223 widthFixedForm">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-8">
                    <div class="switch-inline"><input type="checkbox" id="ppay_is_use"><label for="ppay_is_use" class=""></label></div>
                    <p class="help-block">开启后微信公众号端、H5端、PC端均支持余额支付。</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="dpay" >
        <form class="form-horizontal form-validate2 widthFixedForm">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-8">
                    <div class="switch-inline"><input type="checkbox" id="dpay_is_use"><label for="dpay_is_use"
                                                                                              class=""></label></div>
                    <p class="help-block">开启后微信公众号端、H5端、PC端均支持货到付款。</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="wpay">
        <form class="form-horizontal form-validate3 widthFixedForm">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-8">
                    <div class="switch-inline"><input type="checkbox" name="wxpay_is_use" id="wxpay_is_use" data-type="wap"><label for="wxpay_is_use" class=""></label>
                        <p class="p small-muted">没有微信支付接口？<a class="text-primary"
                                                             href="https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2Findex.php%2Fcore%2Faccount"
                                                             target="_blank">点击前往开通</a></p></div>
                </div>
            </div>
            <div class="J-wxpay" style="display:none;">
            <div class="form-group">
                <label class="col-md-2 control-label"><span class="text-bright">*</span>AppID</label>
                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" class="form-control" name="app_key" id="APP_KEY" value="">
                        <span class="input-group-btn"><a class="btn btn-primary J-appid" href="javascript:void(0);" data-type="wap">获取AppID</a></span>
                    </div>
                    <p class="help-block">如商城已对接公众号可直接获取AppID</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"><span class="text-bright">*</span>MCHID</label>
                <div class="col-md-8">
                    <div class=""><input type="text" class="form-control" name="mchid" id="MCHID" value=""></div>
                    <p class="help-block">微信支付商户号，该商户号需要与上述公众号关联</p></div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"><span class="text-bright">*</span>API秘钥</label>
                <div class="col-md-8">
                    <div class="input-group"><input name="paysignkey" id="paySignKey" value="" class="form-control" type="text"><span
                            class="input-group-btn"><a class="btn btn-primary J-key"
                                                       href="javascript:void(0);">生成秘钥</a></span></div>
                    <p class="help-block">如商户平台已有密钥，可直接粘贴至此输入框，如没有，可生成密钥然后填写至微信商户平台</p></div>
            </div>
            {if $realm_ip}
            <div class="form-group"><label class="col-md-2 control-label">
                <span class="text-bright">*</span>公众号支付授权目录</label>
                <div class="col-md-8">
                    <div class="input-group">
                        <span class="input-group-btn">
                            <select class="form-control" style="width:92px">
                                <option value="-1">https://</option>
                            </select>
                        </span>
                        <input style="opacity: 0;position: absolute; z-index: -11;" type="text" class="form-control" name="call_payback_url1" id="call_payback_url1" value="{$call_payback_url1}">
                        <input class="form-control" name="call_payback_url1" value="{$call_payback_url1}" disabled="true" type="text">
                        <span class="input-group-btn copy8"><a href="javascript:void(0);" class="btn btn-default">复制</a>
                        </span>
                    </div>
                    <div class="mb-0 help-block">支付授权目录请选择"https://"</div>
                </div>
            </div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>H5支付域名</label>
                <div class="col-md-8">
                    <div class="input-group">
                        <input style="opacity: 0;position: absolute; z-index: -11;" type="text" class="form-control" name="realm_ip_h5" id="realm_ip_h5" value="{$realm_ip}">
                        <input class="form-control" name="realm_ip_h5" value="{$realm_ip}" disabled="true" type="text">
                        <span class="input-group-btn copy9">
                            <a href="javascript:void(0);" class="btn btn-default">复制</a>
                        </span>
                    </div>
                    <div class="help-block mb-0">商户平台》产品中心》开发配置，务必把支付域名和授权目录都填上</div>
                </div>
            </div>
            {else}
            <div class="form-group"><label class="col-md-2 control-label"><span
                    class="text-bright">*</span>公众号支付授权目录</label>
                <div class="col-md-8">
                    <div class="input-group">
                        <span class="input-group-btn">
                            <select class="form-control" style="width:92px">
                                <option value="-1">https://</option>
                            </select>
                        </span>
                        <input style="opacity: 0;position: absolute; z-index: -11;" type="text" class="form-control" name="call_payback_url2" id="call_payback_url2" value="{$call_payback_url2}">
                        <input class="form-control" name="call_payback_url2" value="{$call_payback_url2}" disabled="true" type="text">
                        <span class="input-group-btn copy10">
                            <a href="javascript:void(0);" class="btn btn-default">复制</a>
                        </span>
                    </div>
                    <div class="mb-0 help-block">支付授权目录请选择"https://"</div>
                </div>
            </div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>H5支付域名</label>
                <div class="col-md-8">
                    <div class="input-group">
                        <input style="opacity: 0;position: absolute; z-index: -11;" type="text" class="form-control" name="realm_two_ip_h5" id="realm_two_ip_h5" value="{$realm_two_ip}">
                        <input class="form-control" name="realm_two_ip_h5" value="{$realm_two_ip}" disabled="true" type="text">
                        <span class="input-group-btn copy11"><a href="javascript:void(0);" class="btn btn-default">复制</a></span></div>
                    <div class="help-block mb-0">商户平台》产品中心》开发配置，务必把支付域名和授权目录都填上</div>
                </div>
            </div>
            {/if}
            <div class="form-group"><label class="col-md-2 control-label">微信提现</label>
                <div class="col-md-8">
                    <div class="switch-inline">
                        <input type="checkbox" name="wxtw_is_use" id="wxtw_is_use"><label for="wxtw_is_use" class=""></label></div>
                    <p class="help-block">
                        <a class="text-primary" href="https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2Findex.php%2Fcore%2Faccount" target="_blank">微信商户平台</a>
                        》账号中心 》API安全 》API证书 下载证书
                    </p>
                </div>
            </div>
            <div class="J-wxtw" style="display:none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>apiclient_cert证书</label>
                    <div class="col-md-8">
                        <div class="input-group"><input class="cert form-control" disabled type="text">
                            <span class="input-group-btn">
                                <button class="btn btn-info btn-file J-btnwx" data-type="wap">上传文件<input class="fileuploads" type="file" name="file_upload" multiple></button>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>apiclient_key证书</label>
                    <div class="col-md-8">
                        <div class="input-group"><input class="certkey form-control" disabled type="text">
                            <span class="input-group-btn">
                                <button class="btn btn-info btn-file J-btnwx" data-type="wap">上传文件<input class="fileuploads" type="file" name="file_upload" multiple></button>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-2 control-label"></label>
            <div class="col-md-8">
                <button class="btn btn-primary basic_set" type="submit">保存</button>
                <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
            </div>
        </div>
    </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="alipay" >
        <form class="form-horizontal form-validate4 widthFixedForm">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-8">
                    <div class="switch-inline">
                        <input type="checkbox" name="alipay_is_use" id="alipay_is_use">
                        <label for="alipay_is_use" class="" data-type="wap"></label>
                    </div>
                    <p class="help-block">开启后微信公众号端、H5端、PC端均支持余额支付。</p>
                </div>
            </div>
            <div class="J-alipay" style="display:none;">
                <div class="form-group">
                    <label class="col-md-2 control-label"><span class="text-bright">*</span>支付宝账号</label>
                    <div class="col-md-8">
                        <input type="text" class="form-control" name="ali_seller" id="ali_seller" required value="">
                        <p class="help-block">支付宝的登录账号</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label"><span class="text-bright">*</span>合作者身份PID</label>
                    <div class="col-md-8">
                        <input type="text" class="form-control" name="ali_partnerid" id="ali_partnerid" required value="">
                        <p class="help-block">登录支付宝开放平台，在 账户中心 > 密钥管理 > mapi网关产品密钥 > PID 中查看</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label"><span class="text-bright">*</span>安全校验码KEY</label>
                    <div class="col-md-8">
                        <input type="text" class="form-control" name="ali_key" id="ali_key" required value="">
                        <p class="help-block">如商户平台已有密钥，可直接粘贴至此输入框，如没有，可生成密钥然后填写至微信商户平台</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label"><span
                        class="text-bright">*</span>APPID</label>
                    <div class="col-md-8">
                        <input type="text" class="form-control" name="appid" id="appid" required value="">
                        <p class="help-block">支付宝开放平台应用的APPID</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label"><span class="text-bright">*</span>商户应用私钥</label>
                    <div class="col-md-8">
                        <textarea class="form-control" rows="4" name="ali_private_key" id="ali_private_key"></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-md-2 control-label">是否公钥证书</label>
                    <div class="col-md-8">
                        <div class="switch-inline">
                            <input type="checkbox" name="ali_cert_type" id="ali_cert_type"><label for="ali_cert_type" class=""></label>
                        </div>
                    </div>
                </div>
                <div class="form-group J-notcert" style="display:none;">
                    <label class="col-md-2 control-label"><span class="text-bright">*</span>支付宝公钥</label>
                    <div class="col-md-8">
                        <textarea class="form-control" rows="4" name="ali_public_key" id="ali_public_key"></textarea>
                    </div>
                </div>
                <div class="J-cert" style="display:none;">
                    <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>appCertPublicKey证书</label>
                        <div class="col-md-8">
                            <div class="input-group"><input class="appCertPublicKey form-control" name="appCertPublicKey" readonly type="text">
                                <span class="input-group-btn"><button class="btn btn-info btn-file J-btnali" data-type="wap">上传文件
                                    <input class="fileuploads" type="file" name="file_upload" multiple></button></span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>alipayCertPublicKey证书</label>
                        <div class="col-md-8">
                            <div class="input-group">
                                <input class="alipayCertPublicKey form-control" name="alipayCertPublicKey" disabled type="text"><span class="input-group-btn">
                                <button class="btn btn-info btn-file J-btnali" data-type="wap">上传文件
                                <input class="fileuploads" type="file" name="file_upload" multiple></button></span></div>
                        </div>
                    </div>
                    <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>alipayRootCert证书</label>
                        <div class="col-md-8">
                            <div class="input-group">
                                <input class="alipayRootCert form-control" name="alipayRootCert" disabled type="text"><span class="input-group-btn">
                                <button class="btn btn-info btn-file J-btnali" data-type="wap">上传文件
                                    <input class="fileuploads" type="file" name="file_upload" multiple>
                                </button></span></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="tlpay" >
        {if $thirdpay_status}
        <form class="form-horizontal padding-15 form-validate5">
        <div class="form-group"><label class="col-md-2 control-label">通联支付</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" name="tlpay_is_use" id="tlpay_is_use" data-type="wap"><label for="tlpay_is_use" class=""></label></div><p class="help-block">开启后微信公众号端、H5端、PC端均支持银行卡支付。<a class="text-primary pay_bankList" href="javascript:void(0);">支持银行</a></p></div></div>
        <div class="J-tlpay" style="display:none;">
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收银宝商户号</label><div class="col-md-8"><input type="text" class="form-control" name="tl_cusid" id="tl_cusid" required value=""><p class="help-block">通联支付收银宝的商户号。<a class="text-primary" href="https://vsp.allinpay.com/login" target="_blank">前往查询</a></p></div></div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收款账户APPID</label><div class="col-md-8"><input type="text" class="form-control" name="tl_appid" id="tl_appid" required value=""><p class="help-block"><a class="text-primary" href="https://vsp.allinpay.com/login" target="_blank">通联收银宝</a>->设置->对接配置查看。</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收款账户MD5密钥</label><div class="col-md-8"><input type="text" class="form-control" name="tl_key" id="tl_key" required value=""><p class="help-block"><a class="text-primary" href="https://vsp.allinpay.com/login" target="_blank">通联收银宝</a>->设置->对接配置查看。</p></div></div>
        </div>
            <div class="form-group"><label class="col-md-2 control-label">银行卡提现</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" name="tltw_is_use" id="tltw_is_use" ><label for="tltw_is_use" class=""></label></div><p class="help-block">银行卡提现业务由通联支付的通联通处理</p></div></div>
            <div class="J-tltw" style="display:none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>通联通商户号</label><div class="col-md-8"><input type="text" class="form-control" name="tl_id" id="tl_id" value=""></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>用户名</label><div class="col-md-8"><input type="text" class="form-control" name="tl_username" id="tl_username" value=""></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>密码</label><div class="col-md-8"><input type="text" class="form-control" name="tl_password" id="tl_password" value=""></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>数字证书[cer文件]</label>
                    <div class="col-md-8"><div class="input-group">
                        <input class="tl_cert form-control" disabled type="text">
                        <span class="input-group-btn">
                        <button class="btn btn-info btn-file J-btntl" data-type="wap">上传文件<input  class="fileuploads" type="file" name="file_upload" multiple></button>
                        </span></div><p class="help-block">文件类型会被转换为pem</p>
                    </div>
                </div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>证书秘钥[p12文件]</label><div class="col-md-8"><div class="input-group">
                    <input class="tl_certkey form-control" disabled type="text">
                    <span class="input-group-btn"><button class="btn btn-info btn-file J-btntl" data-type="wap">上传文件
                        <input class="fileuploads" type="file" name="file_upload" multiple></button></span></div><p class="help-block">文件类型会被转换为pem</p></div></div>
            </div>
        <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
        {else}
        <form class="form-horizontal padding-15 form-validate5">
            <div class="form-group"><label class="col-md-2 control-label">通联支付</label><div class="col-md-8"><p class="help-block">当前版本未包含聚合支付应用。<a class="text-primary increment" href="javascript:void(0);" data-type="tl">立即开通</a>或<a class="text-primary" href="https://tb.53kf.com/code/client/fe6f8c99d694387455de7d72b5a4c85a9/1" target="_blank">联系客服</a></p></div></div>
        </form>
        {/if}
    </div>
    <div role="tabpanel" class="tab-pane fade" id="eospay" >
        <form class="form-horizontal form-validate6 widthFixedForm">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-8">
                    <div class="switch-inline"><input type="checkbox" id="eospay_is_use"><label for="eospay_is_use"
                                                                                                class=""></label></div>
                    <p class="help-block">开启后微信公众号端、H5端、PC端均支持EOS虚拟币支付。</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="ethpay" >
        <form class="form-horizontal form-validate7 widthFixedForm">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-8">
                    <div class="switch-inline"><input type="checkbox" id="ethpay_is_use"><label for="ethpay_is_use"
                                                                                                class=""></label></div>
                    <p class="help-block">开启后微信公众号端、H5端、PC端均支持ETH虚拟币支付。</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="glopay" >
        {if $thirdpay_status}
        <form class="form-horizontal padding-15 form-validate8">
            <div class="form-group"><label class="col-md-2 control-label">GlobePay支付</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" name="gppay_is_use" id="gppay_is_use" data-type="wap"><label for="gppay_is_use" class=""></label><p class="p small-muted">没有GlobePay账号？<a class="text-primary" href="https://pay.globepay.co.jp" target="_blank">点击前往开通</a></p></div></div></div>
            <!--            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>Appid</label><div class="col-md-8"><input type="text" class="form-control" name="appid" id="APPID" value=""></div></div>-->
            <div class="globe" style="display: none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>Partnercode</label><div class="col-md-8"><input type="text" class="form-control" name="partner_code" id="PARTNER_CODE" value=""></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>Credentialcode</label><div class="col-md-8"><input type="text" class="form-control" name="credential_code" id="CREDENTIAL_CODE" value=""></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>币种</label><div class="col-md-8" style="line-height:32px"><input type="radio" value="JPY" checked name="CURRENCY" style="margin:0 0 5px 0"> JPY（日元）<input type="radio" value="CNY" name="CURRENCY" style="margin:0 0 5px 15px"> CNY（人民币）</div></div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
        {else}
        <form class="form-horizontal padding-15 form-validate8">
            <div class="form-group"><label class="col-md-2 control-label">GlobePay支付</label><div class="col-md-8"><p class="help-block">当前版本未包含聚合支付应用。<a class="text-primary increment" href="javascript:void(0);" data-type="globe">立即开通</a>或<a class="text-primary" href="https://tb.53kf.com/code/client/fe6f8c99d694387455de7d72b5a4c85a9/1" target="_blank">联系客服</a></p></div></div>
        </form>
        {/if}
    </div>
    <div role="tabpanel" class="tab-pane fade" id="offlinepay">
        <form class="form-horizontal form-validate21 widthFixedForm">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-8">
                    <div class="switch-inline"><input type="checkbox" id="offlinepay_is_use"><label for="offlinepay_is_use"
                                                                                                    class=""></label></div>
                    <p class="help-block">开启后微信公众号端、H5端、PC端均支持该支付，会员通过上传支付凭证后台审核通过后完成支付。</p>
                </div>
            </div>
            <div class="offlinepay_config" style="display:none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>支付方式名称</label>
                    <div class="col-md-8">
                        <div class=""><input type="text" class="form-control" id="pay_name" value=""></div>
                        <p class="help-block">该名称展示在前端</p></div>
                </div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收款码</label>
                    <div class="col-md-8">
                        <div class="picture-list" id="collection_code"></div>
                        <p class="help-block">收款码将展示在前端支付页面供买家扫码支付</p></div>
                </div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收款备注</label>
                    <div class="col-md-8">
                        <textarea class="form-control" name="collection_memo" id="collection_memo" rows="7"></textarea>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="joinpay" >
        {if $thirdpay_status}
        <form class="form-horizontal padding-15 form-validate88">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" name="joinpay_is_use" id="joinpay_is_use" data-type="wap"><label for="joinpay_is_use" class=""></label><p class="p small-muted">汇聚支付的聚会支付产品开启后微信公众号端、H5端、PC端、App端均支持银行卡支付。<a class="text-primary" href="__STATIC__/images/38e42aa8260fc4f65c1ba45e41096a7.png" target="_blank">支持银行</a></p></div></div></div>
            <div class="J-joinpay"  style="display:none;">
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>商户编号</label><div class="col-md-8"><input type="text" class="form-control" id="p1_MerchantNo" required value=""><p class="help-block">汇聚支付商户编号。</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>交易商户号</label><div class="col-md-8"><textarea class="form-control" rows="4" id="qa_TradeMerchantNo"></textarea><p class="help-block">汇聚支付交易商户号。使用多个商户号交易，请以英文,号分隔，当一交易商户号被冻结则自动更换商户号交易</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>汇聚支付MD5密钥</label><div class="col-md-8"><input type="text" class="form-control" id="hmacVal" required value=""><p class="help-block">汇聚支付MD5密钥。</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">AppId</label><div class="col-md-8"><input type="text" class="form-control" id="joinpay_wx_appId"  value=""><p class="help-block">启用汇聚微信支付需填写WEIXIN_APP_AppId或者WEIXIN_GZH_AppId</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">启用汇聚微信支付</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpay_wx_is_use"  data-type="wap"><label for="joinpay_wx_is_use" class=""></label></div><p class="help-block">汇聚微信支付与系统微信支付只能启用其中一个</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">启用汇聚支付宝支付</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpay_ali_is_use"  data-type="wap"><label for="joinpay_ali_is_use" class=""></label></div><p class="help-block">汇聚支付宝支付与系统支付宝支付只能启用其中一个</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">启用汇聚协议快捷支付</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="fastpay_is_use"  data-type="wap"><label for="fastpay_is_use" class=""></label></div><p class="help-block">汇聚银行快捷支付与通联银行支付只能启用其中一个</p></div></div>
            <div class="key_set" style="display:none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>平台公钥</label><div class="col-md-8"><textarea class="form-control" rows="4" id="fastpay_public_key"></textarea></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>商户私钥</label><div class="col-md-8"><textarea class="form-control" rows="4" id="fastpay_private_key"></textarea></div></div>
            </div>
            <div class="form-group"><label class="col-md-2 control-label">汇聚支付分账</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpay_alt_is_use" ><label for="joinpay_alt_is_use" class=""></label></div><p class="help-block">多店铺使用支付则生成分账订单,子店铺需要配置相应的子商户号</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">自动分账</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpay_alt_is_auto" ><label for="joinpay_alt_is_auto" class=""></label></div><p class="help-block">启用自动分账则由系统自动执行分账操作,子店铺需要配置相应的子商户号</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">银行卡提现(朝夕付)</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpaytw_is_use" ><label for="joinpaytw_is_use" class=""></label></div><p class="help-block">银行卡提现业务由汇聚支付的朝夕付代付产品处理</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">朝夕付启用自动审核</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpaytw_is_auto" ><label for="joinpaytw_is_auto" class=""></label></div><p class="help-block">银行卡提现业务开启自动审核则自动打款，否则需要在汇聚平台通过审核打款</p></div></div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </div>
        </form>
        {else}
        <form class="form-horizontal padding-15 form-validate88">
            <div class="form-group"><label class="col-md-2 control-label">汇聚支付</label><div class="col-md-8"><p class="help-block">当前版本未包含聚合支付应用。<a class="text-primary increment" href="javascript:void(0);" data-type="tl">立即开通</a>或<a class="text-primary" href="https://tb.53kf.com/code/client/fe6f8c99d694387455de7d72b5a4c85a9/1" target="_blank">联系客服</a></p></div></div>
        </form>
        {/if}
    </div>
    {elseif $pay_type == 2}
    <div role="tabpanel" class="tab-pane fade  in active" id="bpaymp" >
        <form class="form-horizontal form-validate9">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label><div class="col-md-8"> <div class="switch-inline"><input type="checkbox" id="bpay_is_use" ><label for="bpay_is_use" class=""></label></div></div></div>
            <div class="form-group">
                <label class="col-md-2 control-la   bel"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="ppaymp" >
        <form class="form-horizontal form-validate99">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label><div class="col-md-8"> <div class="switch-inline"><input type="checkbox" id="ppay_is_use" ><label for="ppay_is_use" class=""></label></div></div></div>
            <div class="form-group">
                <label class="col-md-2 control-la   bel"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="dpaymp" >
        <form class="form-horizontal form-validate10">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-8">
                    <div class="switch-inline"><input type="checkbox" id="dpay_is_use"><label for="dpay_is_use"
                                                                                              class=""></label></div>
                    <p class="help-block">开启后微信公众号端、H5端、PC端均支持货到付款。</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="mppay">
        <form class="form-horizontal form-validate11">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-4">
                    <div class="switch-inline">
                        <input type="checkbox" name="wxpay_is_use" id="wxpay_is_use"  data-type="mp">
                        <label for="wxpay_is_use" class=""></label>
                        <p class="p small-muted">没有微信支付接口？<a class="text-primary" href="https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2Findex.php%2Fcore%2Faccount" target="_blank">点击前往开通</a></p>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"><span class="text-bright">*</span>小程序AppID</label>
                <div class="col-md-4">
                    <div class="input-group">
                        <input type="text" class="form-control" name="app_key" id="APP_KEY" value="">
                        <span class="input-group-btn"><a class="btn btn-primary J-appid" href="javascript:void(0);" data-type="mp">获取AppID</a></span>
                    </div>
                    <p class="help-block">如商城已对接公众号可直接获取AppID</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"><span class="text-bright">*</span>MCHID</label>
                <div class="col-md-4">
                    <div class=""><input type="text" class="form-control" name="mchid" id="MCHID" value=""></div>
                    <p class="help-block">微信支付商户号，该商户号需要与上述公众号关联</p></div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"><span class="text-bright">*</span>API秘钥</label>
                <div class="col-md-4">
                    <div class="input-group"><input name="paysignkey" id="paySignKey" value="" class="form-control" type="text"><span
                            class="input-group-btn"><a class="btn btn-primary J-key"
                                                       href="javascript:void(0);">生成秘钥</a></span></div>
                    <p class="help-block">如商户平台已有密钥，可直接粘贴至此输入框，如没有，可生成密钥然后填写至微信商户平台</p>
                </div>
            </div>
            <div class="form-group"><label class="col-md-2 control-label">微信提现</label>
                <div class="col-md-4">
                    <div class="switch-inline"><input type="checkbox" name="wxtw_is_use" id="wxtw_is_use">
                        <label for="wxtw_is_use" class=""></label>
                    </div>
                    <p class="help-block">
                        <a class="text-primary" href="https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2Findex.php%2Fcore%2Faccount" target="_blank">微信商户平台</a>
                        》账号中心 》API安全 》API证书 下载证书
                    </p>
                </div>
            </div>
            <div class="J-wxtw" style="display:none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>apiclient_cert证书</label>
                    <div class="col-md-4">
                        <div class="input-group"><input class="cert form-control" disabled type="text"> <span
                                class="input-group-btn"><button class="btn btn-info btn-file J-btnwx" data-type="mp">上传文件<input
                                class="fileuploads" type="file" name="file_upload" multiple></button></span>
                        </div>
                    </div>
                </div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>apiclient_key证书</label>
                    <div class="col-md-4">
                        <div class="input-group"><input class="certkey form-control" disabled type="text"><span
                                class="input-group-btn"><button class="btn btn-info btn-file J-btnwx" data-type="mp">上传文件<input
                                class="fileuploads" type="file" name="file_upload" multiple></button></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="gppay" >
        {if $thirdpay_status}
        <form class="form-horizontal form-validate12">
            <div class="form-group"><label class="col-md-2 control-label">GlobePay支付</label>
                <div class="col-md-8">
                    <div class="switch-inline"><input type="checkbox" name="gppay_is_use" name="appid" id="gppay_is_use" data-type="mp"><label for="gppay_is_use"
                                                                                               class=""></label>
                        <p class="p small-muted">没有GlobePay账号？<a class="text-primary" href="https://pay.globepay.co.jp"
                                                                 target="_blank">点击前往开通</a></p></div>
                </div>
            </div>
<!--            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>Appid</label>-->
<!--                <div class="col-md-8"><input type="text" class="form-control" id="APPID" value=""></div>-->
<!--            </div>-->
            <div class="globe" style="display: none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>Partnercode</label>
                    <div class="col-md-8"><input type="text" class="form-control" name="partner_code" id="PARTNER_CODE" value=""></div>
                </div>
                <div class="form-group"><label class="col-md-2 control-label"><span
                        class="text-bright">*</span>Credentialcode</label>
                    <div class="col-md-8"><input type="text" class="form-control" name="credential_code" id="CREDENTIAL_CODE" value=""></div>
                </div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>币种</label>
                    <div class="col-md-8" style="line-height:32px">
                        <input type="radio" value="JPY" checked name="CURRENCY" style="margin:0 0 5px 0"> JPY（日元）
                        <input type="radio" value="CNY" name="CURRENCY" style="margin:0 0 5px 15px"> CNY（人民币）
                    </div>
                </div>
            </div>
            <div class="form-group">
            <label class="col-md-2 control-label"></label>
            <div class="col-md-8">
                <button class="btn btn-primary basic_set" type="submit">保存</button>
                <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
            </div>
    </div>
        </form>
        {else}
        <form class="form-horizontal padding-15 form-validate8">
            <div class="form-group"><label class="col-md-2 control-label">GlobePay支付</label><div class="col-md-8"><p class="help-block">当前版本未包含聚合支付应用。<a class="text-primary increment" href="javascript:void(0);" data-type="globe">立即开通</a>或<a class="text-primary" href="https://tb.53kf.com/code/client/fe6f8c99d694387455de7d72b5a4c85a9/1" target="_blank">联系客服</a></p></div></div>
        </form>
        {/if}
    </div>
    <div role="tabpanel" class="tab-pane fade" id="tlpaymp" >
        {if $thirdpay_status}
        <form class="form-horizontal padding-15 form-validate17">
            <div class="form-group"><label class="col-md-2 control-label">通联支付</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" name="tlpay_is_use" id="tlpay_is_use" data-type="mp"><label for="tlpay_is_use" class=""></label></div><p class="help-block">开启后小程序端支持银行卡支付。<a class="text-primary pay_bankList" href="javascript:void(0);">支持银行</a></p></div></div>
            <div class="J-tlpay" style="display:none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收银宝商户号</label><div class="col-md-8"><input type="text" class="form-control" name="tl_cusid" id="tl_cusid" required value=""><p class="help-block">通联支付收银宝的商户号。<a class="text-primary" href="https://vsp.allinpay.com/login" target="_blank">前往查询</a></p></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收款账户APPID</label><div class="col-md-8"><input type="text" class="form-control" name="tl_appid" id="tl_appid" required value=""><p class="help-block"><a class="text-primary" href="https://vsp.allinpay.com/login" target="_blank">通联收银宝</a>->设置->对接配置查看。</p></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收款账户MD5密钥</label><div class="col-md-8"><input type="text" class="form-control" name="tl_key" id="tl_key" required value=""><p class="help-block"><a class="text-primary" href="https://vsp.allinpay.com/login" target="_blank">通联收银宝</a>->设置->对接配置查看。</p></div></div>
            </div>
            <div class="form-group"><label class="col-md-2 control-label">银行卡提现</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" name="tltw_is_use" id="tltw_is_use" ><label for="tltw_is_use" class=""></label></div><p class="help-block">银行卡提现业务由通联支付的通联通处理</p></div></div>
            <div class="J-tltw" style="display:none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>通联通商户号</label><div class="col-md-8"><input type="text" class="form-control" name="tl_id" id="tl_id" value=""></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>用户名</label><div class="col-md-8"><input type="text" class="form-control" name="tl_username" id="tl_username" value=""></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>密码</label><div class="col-md-8"><input type="text" class="form-control" name="tl_password" id="tl_password" value=""></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>数字证书[cer文件]</label><div class="col-md-8"><div class="input-group"><input class="tl_cert form-control" disabled type="text"> <span class="input-group-btn">
                        <button class="btn btn-info btn-file J-btntl" data-type="mp">上传文件<input  class="fileuploads" type="file" name="file_upload" multiple></button>
                    </span></div><p class="help-block">文件类型会被转换为pem</p></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>证书秘钥[p12文件]</label><div class="col-md-8"><div class="input-group">
                    <input class="tl_certkey form-control" disabled type="text"> <span class="input-group-btn">
                        <button class="btn btn-info btn-file J-btntl" data-type="mp">上传文件<input class="fileuploads" type="file" name="file_upload" multiple></button>
                    </span></div><p class="help-block">文件类型会被转换为pem</p></div></div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
        {else}
        <form class="form-horizontal padding-15 form-validate17">
            <div class="form-group"><label class="col-md-2 control-label">通联支付</label><div class="col-md-8"><p class="help-block">当前版本未包含聚合支付应用。<a class="text-primary increment" href="javascript:void(0);" data-type="tl">立即开通</a>或<a class="text-primary" href="https://tb.53kf.com/code/client/fe6f8c99d694387455de7d72b5a4c85a9/1" target="_blank">联系客服</a></p></div></div>
        </form>
        {/if}
    </div>
    <div role="tabpanel" class="tab-pane fade" id="offlinepaymp">
    <form class="form-horizontal form-validate22 widthFixedForm">
        <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
            <div class="col-md-8">
                <div class="switch-inline"><input type="checkbox" id="offlinepay_is_use"><label for="offlinepay_is_use"
                                                                                                class=""></label></div>
                <p class="help-block">开启后微信公众号端、H5端、PC端均支持该支付，会员通过上传支付凭证后台审核通过后完成支付。</p>
            </div>
        </div>
        <div class="offlinepay_config" style="display:none;">
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>支付方式名称</label>
                <div class="col-md-8">
                    <div class=""><input type="text" class="form-control" id="pay_name" value=""></div>
                    <p class="help-block">该名称展示在前端</p></div>
            </div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收款码</label>
                <div class="col-md-8">
                    <div class="picture-list" id="collection_code"></div>
                    <p class="help-block">收款码将展示在前端支付页面供买家扫码支付</p></div>
            </div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收款备注</label>
                <div class="col-md-8">
                    <textarea class="form-control" name="collection_memo" id="collection_memo" rows="7"></textarea>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-2 control-label"></label>
            <div class="col-md-8">
                <button class="btn btn-primary basic_set" type="submit">保存</button>
                <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
            </div>
        </div>
    </form>
</div>
    <div role="tabpanel" class="tab-pane fade" id="joinpay" >
        {if $thirdpay_status}
        <form class="form-horizontal padding-15 form-validate888">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" name="joinpay_is_use" id="joinpay_is_use" data-type="mp"><label for="joinpay_is_use" class=""></label><p class="p small-muted">汇聚支付的聚会支付产品开启后微信公众号端、H5端、PC端、App端均支持银行卡支付。<a class="text-primary" href="__STATIC__/images/38e42aa8260fc4f65c1ba45e41096a7.png" target="_blank">支持银行</a></p></div></div></div>
            <div class="J-joinpay"  style="display:none;">
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>商户编号</label><div class="col-md-8"><input type="text" class="form-control" id="p1_MerchantNo" required value=""><p class="help-block">汇聚支付商户编号。</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>交易商户号</label><div class="col-md-8"><textarea class="form-control" rows="4" id="qa_TradeMerchantNo"></textarea><p class="help-block">汇聚支付交易商户号。使用多个商户号交易，请以英文,号分隔，当一交易商户号被冻结则自动更换商户号交易</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>汇聚支付MD5密钥</label><div class="col-md-8"><input type="text" class="form-control" id="hmacVal" required value=""><p class="help-block">汇聚支付MD5密钥。</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">AppId</label><div class="col-md-8"><input type="text" class="form-control" id="joinpay_wx_appId"  value=""><p class="help-block">启用汇聚微信支付需填写WEIXIN_APP_AppId或者WEIXIN_GZH_AppId</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">启用汇聚微信支付</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpay_wx_is_use"  data-type="mp"><label for="joinpay_wx_is_use" class=""></label></div><p class="help-block">汇聚微信支付与系统微信支付只能启用其中一个</p></div></div>
            <!-- <div class="form-group"><label class="col-md-2 control-label">启用汇聚支付宝支付</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpay_ali_is_use"  data-type="mp"><label for="joinpay_ali_is_use" class=""></label></div><p class="help-block">汇聚支付宝支付与系统支付宝支付只能启用其中一个</p></div></div> -->
            <div class="form-group"><label class="col-md-2 control-label">启用汇聚协议快捷支付</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="fastpay_is_use"  data-type="mp"><label for="fastpay_is_use" class=""></label></div><p class="help-block">汇聚银行快捷支付与通联银行支付只能启用其中一个</p></div></div>
            <div class="key_set" style="display:none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>平台公钥</label><div class="col-md-8"><textarea class="form-control" rows="4" id="fastpay_public_key"></textarea></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>商户私钥</label><div class="col-md-8"><textarea class="form-control" rows="4" id="fastpay_private_key"></textarea></div></div>
            </div>
            <div class="form-group"><label class="col-md-2 control-label">汇聚支付分账</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpay_alt_is_use" ><label for="joinpay_alt_is_use" class=""></label></div><p class="help-block">多店铺使用支付则生成分账订单,子店铺需要配置相应的子商户号</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">自动分账</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpay_alt_is_auto" ><label for="joinpay_alt_is_auto" class=""></label></div><p class="help-block">启用自动分账则由系统自动执行分账操作,子店铺需要配置相应的子商户号</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">银行卡提现(朝夕付)</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpaytw_is_use" ><label for="joinpaytw_is_use" class=""></label></div><p class="help-block">银行卡提现业务由汇聚支付的朝夕付代付产品处理</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">朝夕付启用自动审核</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpaytw_is_auto" ><label for="joinpaytw_is_auto" class=""></label></div><p class="help-block">银行卡提现业务开启自动审核则自动打款，否则需要在汇聚平台通过审核打款</p></div></div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </div>
        </form>
        {else}
        <form class="form-horizontal padding-15 form-validate888">
            <div class="form-group"><label class="col-md-2 control-label">汇聚支付</label><div class="col-md-8"><p class="help-block">当前版本未包含聚合支付应用。<a class="text-primary increment" href="javascript:void(0);" data-type="tl">立即开通</a>或<a class="text-primary" href="https://tb.53kf.com/code/client/fe6f8c99d694387455de7d72b5a4c85a9/1" target="_blank">联系客服</a></p></div></div>
        </form>
        {/if}
    </div>
    {elseif $pay_type == 3}
    <div role="tabpanel" class="tab-pane fade  in active" id="bpayapp" >
        <form class="form-horizontal form-validate13">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label><div class="col-md-8"> <div class="switch-inline"><input type="checkbox" id="bpay_is_use" ><label for="bpay_is_use" class=""></label></div></div></div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="dpayapp" >
        <form class="form-horizontal form-validate14">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-8">
                    <div class="switch-inline"><input type="checkbox" id="dpay_is_use"><label for="dpay_is_use"
                                                                                              class=""></label></div>
                    <p class="help-block">开启后微信公众号端、H5端、PC端均支持货到付款。</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="wpayapp">
        <form class="form-horizontal form-validate15">
            <div class="form-group">
                <label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-8"><div class="switch-inline">
                    <input type="checkbox" name="wxpay_is_use" id="wxpay_is_use" data-type="app" ><label for="wxpay_is_use" class=""></label>
                    <p class="p small-muted">没有微信支付接口？<a class="text-primary" href="https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2Findex.php%2Fcore%2Faccount" target="_blank">点击前往开通</a></p>
                </div></div></div>
            <div class="form-group">
                <label class="col-md-2 control-label"><span class="text-bright">*</span>AppID</label>
                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" class="form-control" name="app_key"  id="APP_KEY" value="">
                        <span class="input-group-btn"><a class="btn btn-primary J-appid" href="javascript:void(0);" data-type="app">获取AppID</a></span>
                    </div>
                    <p class="help-block">如商城已对接公众号可直接获取AppID</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"><span class="text-bright">*</span>MCHID</label>
                <div class="col-md-8">
                    <div class=""><input type="text" class="form-control" name="mchid" id="MCHID" value=""></div>
                    <p class="help-block">微信支付商户号，该商户号需要与上述公众号关联</p></div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"><span class="text-bright">*</span>API秘钥</label>
                <div class="col-md-8">
                    <div class="input-group"><input name="paysignkey" id="paySignKey" value="" class="form-control" type="text"><span
                            class="input-group-btn"><a class="btn btn-primary J-key"
                                                       href="javascript:void(0);">生成秘钥</a></span></div>
                    <p class="help-block">如商户平台已有密钥，可直接粘贴至此输入框，如没有，可生成密钥然后填写至微信商户平台</p>
                </div>
            </div>
            <div class="form-group"><label class="col-md-2 control-label">微信提现</label>
                <div class="col-md-8">
                    <div class="switch-inline"><input type="checkbox" name="wxtw_is_use" id="wxtw_is_use"><label for="wxtw_is_use"
                                                                                              class=""></label></div>
                    <p class="help-block"><a class="text-primary"
                                             href="https://pay.weixin.qq.com/index.php/core/home/login?return_url=%2Findex.php%2Fcore%2Faccount"
                                             target="_blank">微信商户平台</a> 》账号中心 》API安全 》API证书 下载证书</p></div>
            </div>
            <div class="J-wxtw" style="display:none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>apiclient_cert证书</label>
                    <div class="col-md-8">
                        <div class="input-group"><input class="cert form-control" disabled type="text"> <span
                                class="input-group-btn"><button class="btn btn-info btn-file J-btnwx" data-type="app">上传文件<input
                                class="fileuploads" type="file" name="file_upload" multiple></button></span>
                        </div>
                    </div>
                </div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>apiclient_key证书</label>
                    <div class="col-md-8">
                        <div class="input-group"><input class="certkey form-control" disabled type="text"><span
                                class="input-group-btn"><button class="btn btn-info btn-file J-btnwx" data-type="app">上传文件<input
                                class="fileuploads" type="file" name="file_upload" multiple></button></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="alipayapp">
        <form class="form-horizontal form-validate16">
        <div class="form-group">
            <label class="col-md-2 control-label">是否启用</label>
            <div class="col-md-8">
                <div class="switch-inline">
                    <input type="checkbox" name="alipay_is_use" id="alipay_is_use" data-type="app"><label for="alipay_is_use" class=""></label>
                </div>
                <p class="help-block">开启后微信公众号端、H5端、PC端均支持余额支付。</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-2 control-label"><span class="text-bright">*</span>支付宝账号</label>
            <div class="col-md-8">
                <input type="text" class="form-control" name="ali_seller" id="ali_seller" required value="">
                <p class="help-block">支付宝的登录账号</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-2 control-label"><span class="text-bright">*</span>合作者身份ID</label>
            <div class="col-md-8">
                <input type="text" class="form-control" name="ali_partnerid" id="ali_partnerid" required value="">
                <p class="help-block">登录支付宝开放平台，在 账户中心 > 密钥管理 > mapi网关产品密钥 > PID 中查看</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-2 control-label"><span class="text-bright">*</span>安全校验码</label>
            <div class="col-md-8">
                <input type="text" class="form-control" name="ali_key" id="ali_key" required value="">
                <p class="help-block">如商户平台已有密钥，可直接粘贴至此输入框，如没有，可生成密钥然后填写至微信商户平台</p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-2 control-label"><span class="text-bright">*</span>APPID</label>
            <div class="col-md-8">
                <input type="text" class="form-control" name="appid" id="appid" required value="">
                <p class="help-block">支付宝开放平台应用的APPID</p>
            </div>
        </div>
            <div class="form-group">
                <label class="col-md-2 control-label"><span class="text-bright">*</span>商户应用私钥</label>
                <div class="col-md-8">
                    <textarea class="form-control" rows="4" name="ali_private_key" id="ali_private_key"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">是否公钥证书</label>
                <div class="col-md-8">
                    <div class="switch-inline">
                        <input type="checkbox" name="ali_cert_type" id="ali_cert_type"><label for="ali_cert_type" class=""></label>
                    </div>
                </div>
            </div>
            <div class="form-group J-notcert" style="display:none;">
                <label class="col-md-2 control-label"><span class="text-bright">*</span>支付宝公钥</label>
                <div class="col-md-8">
                    <textarea class="form-control" rows="4" name="ali_public_key" id="ali_public_key"></textarea>
                </div>
            </div>
            <div class="J-cert" style="display:none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>appCertPublicKey证书</label>
                    <div class="col-md-8">
                        <div class="input-group"><input class="appCertPublicKey form-control" name="appCertPublicKey" readonly type="text">
                            <span class="input-group-btn">
                                <button class="btn btn-info btn-file J-btnali" data-type="app">上传文件
                                    <input class="fileuploads" type="file" name="file_upload" multiple>
                                </button></span>
                        </div>
                    </div>
                </div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>alipayCertPublicKey证书</label>
                    <div class="col-md-8">
                        <div class="input-group">
                            <input class="alipayCertPublicKey form-control" name="alipayCertPublicKey" disabled type="text"><span class="input-group-btn">
                            <button class="btn btn-info btn-file J-btnali" data-type="app">上传文件
                                <input class="fileuploads" type="file" name="file_upload" multiple></button>
                        </span></div>
                    </div>
                </div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>alipayRootCert证书</label>
                    <div class="col-md-8">
                        <div class="input-group">
                            <input class="alipayRootCert form-control" name="alipayRootCert" disabled type="text"><span class="input-group-btn">
                            <button class="btn btn-info btn-file J-btnali" data-type="app">上传文件
                                <input class="fileuploads" type="file" name="file_upload" multiple>
                            </button></span></div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="tlpayapp" >
        {if $thirdpay_status}
        <form class="form-horizontal padding-15 form-validate18">
            <div class="form-group"><label class="col-md-2 control-label">通联支付</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" name="tlpay_is_use" id="tlpay_is_use" data-type="app"><label for="tlpay_is_use" class=""></label></div><p class="help-block">开启后APP端支持银行卡支付。<a class="text-primary pay_bankList" href="javascript:void(0);">支持银行</a></p></div></div>
            <div class="J-tlpay" style="display:none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收银宝商户号</label><div class="col-md-8"><input type="text" class="form-control" name="tl_cusid" id="tl_cusid" required value=""><p class="help-block">通联支付收银宝的商户号。<a class="text-primary" href="https://vsp.allinpay.com/login" target="_blank">前往查询</a></p></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收款账户APPID</label><div class="col-md-8"><input type="text" class="form-control" name="tl_appid" id="tl_appid" required value=""><p class="help-block"><a class="text-primary" href="https://vsp.allinpay.com/login" target="_blank">通联收银宝</a>->设置->对接配置查看。</p></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收款账户MD5密钥</label><div class="col-md-8"><input type="text" class="form-control" name="tl_key" id="tl_key" required value=""><p class="help-block"><a class="text-primary" href="https://vsp.allinpay.com/login" target="_blank">通联收银宝</a>->设置->对接配置查看。</p></div></div>
            </div>
            <div class="form-group"><label class="col-md-2 control-label">银行卡提现</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" name="tltw_is_use" id="tltw_is_use" ><label for="tltw_is_use" class=""></label></div><p class="help-block">银行卡提现业务由通联支付的通联通处理</p></div></div>
            <div class="J-tltw" style="display: none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>通联通商户号</label><div class="col-md-8"><input type="text" class="form-control" name="tl_id" id="tl_id" value=""></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>用户名</label><div class="col-md-8"><input type="text" class="form-control" name="tl_username" id="tl_username" value=""></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>密码</label><div class="col-md-8"><input type="text" class="form-control" name="tl_password" id="tl_password" value=""></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>数字证书[cer文件]</label><div class="col-md-8"><div class="input-group"><input class="tl_cert form-control" disabled type="text"> <span class="input-group-btn">
                        <button class="btn btn-info btn-file J-btntl" data-type="app">上传文件<input  class="fileuploads" type="file" name="file_upload" multiple></button>
                    </span></div><p class="help-block">文件类型会被转换为pem</p></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>证书秘钥[p12文件]</label><div class="col-md-8"><div class="input-group">
                    <input class="tl_certkey form-control" disabled type="text"> <span class="input-group-btn">
                        <button class="btn btn-info btn-file J-btntl" data-type="app">上传文件 <input class="fileuploads" type="file" name="file_upload" multiple></button>
                    </span></div><p class="help-block">文件类型会被转换为pem</p></div></div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
        {else}
        <form class="form-horizontal padding-15 form-validate17">
            <div class="form-group"><label class="col-md-2 control-label">通联支付</label><div class="col-md-8"><p class="help-block">当前版本未包含聚合支付应用。<a class="text-primary increment" href="javascript:void(0);" data-type="tl">立即开通</a>或<a class="text-primary" href="https://tb.53kf.com/code/client/fe6f8c99d694387455de7d72b5a4c85a9/1" target="_blank">联系客服</a></p></div></div>
        </form>
        {/if}
    </div>
    <div role="tabpanel" class="tab-pane fade" id="eospayapp" >
        <form class="form-horizontal form-validate19 widthFixedForm">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-8">
                    <div class="switch-inline"><input type="checkbox" id="eospay_is_use"><label for="eospay_is_use" class=""></label></div>
                    <p class="help-block">开启后微信公众号端、H5端、PC端均支持EOS虚拟币支付。</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="ethpayapp" >
        <form class="form-horizontal form-validate20 widthFixedForm">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
                <div class="col-md-8">
                    <div class="switch-inline"><input type="checkbox" id="ethpay_is_use"><label for="ethpay_is_use" class=""></label></div>
                    <p class="help-block">开启后微信公众号端、H5端、PC端均支持ETH虚拟币支付。</p>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </form>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="offlinepayapp">
    <form class="form-horizontal form-validate23 widthFixedForm">
        <div class="form-group"><label class="col-md-2 control-label">是否启用</label>
            <div class="col-md-8">
                <div class="switch-inline"><input type="checkbox" id="offlinepay_is_use"><label for="offlinepay_is_use"
                                                                                                class=""></label></div>
                <p class="help-block">开启后微信公众号端、H5端、PC端均支持该支付，会员通过上传支付凭证后台审核通过后完成支付。</p>
            </div>
        </div>
        <div class="offlinepay_config" style="display:none;">
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>支付方式名称</label>
                <div class="col-md-8">
                    <div class=""><input type="text" class="form-control" id="pay_name" value=""></div>
                    <p class="help-block">该名称展示在前端</p></div>
            </div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收款码</label>
                <div class="col-md-8">
                    <div class="picture-list" id="collection_code"></div>
                    <p class="help-block">收款码将展示在前端支付页面供买家扫码支付</p></div>
            </div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>收款备注</label>
                <div class="col-md-8">
                    <textarea class="form-control" name="collection_memo" id="collection_memo" rows="7"></textarea>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label class="col-md-2 control-label"></label>
            <div class="col-md-8">
                <button class="btn btn-primary basic_set" type="submit">保存</button>
                <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
            </div>
        </div>
    </form>
</div>
    <div role="tabpanel" class="tab-pane fade" id="joinpay" >
        {if $thirdpay_status}
        <form class="form-horizontal padding-15 form-validate8888">
            <div class="form-group"><label class="col-md-2 control-label">是否启用</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" name="joinpay_is_use" id="joinpay_is_use" data-type="app"><label for="joinpay_is_use" class=""></label><p class="p small-muted">汇聚支付的聚会支付产品开启后微信公众号端、H5端、PC端、App端均支持银行卡支付。<a class="text-primary" href="__STATIC__/images/38e42aa8260fc4f65c1ba45e41096a7.png" target="_blank">支持银行</a></p></div></div></div>
            <div class="J-joinpay"  style="display:none;">
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>商户编号</label><div class="col-md-8"><input type="text" class="form-control" id="p1_MerchantNo" required value=""><p class="help-block">汇聚支付商户编号。</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>交易商户号</label><div class="col-md-8"><textarea class="form-control" rows="4" id="qa_TradeMerchantNo"></textarea><p class="help-block">汇聚支付交易商户号。使用多个商户号交易，请以英文,号分隔，当一交易商户号被冻结则自动更换商户号交易</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>汇聚支付MD5密钥</label><div class="col-md-8"><input type="text" class="form-control" id="hmacVal" required value=""><p class="help-block">汇聚支付MD5密钥。</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">AppId</label><div class="col-md-8"><input type="text" class="form-control" id="joinpay_wx_appId"  value=""><p class="help-block">启用汇聚微信支付需填写WEIXIN_APP_AppId或者WEIXIN_GZH_AppId</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">启用汇聚微信支付</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpay_wx_is_use"  data-type="app"><label for="joinpay_wx_is_use" class=""></label></div><p class="help-block">汇聚微信支付与系统微信支付只能启用其中一个</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">启用汇聚支付宝支付</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpay_ali_is_use"  data-type="app"><label for="joinpay_ali_is_use" class=""></label></div><p class="help-block">汇聚支付宝支付与系统支付宝支付只能启用其中一个</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">启用汇聚协议快捷支付</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="fastpay_is_use"  data-type="app"><label for="fastpay_is_use" class=""></label></div><p class="help-block">汇聚银行快捷支付与通联银行支付只能启用其中一个</p></div></div>
            <div class="key_set" style="display:none;">
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>平台公钥</label><div class="col-md-8"><textarea class="form-control" rows="4" id="fastpay_public_key"></textarea></div></div>
                <div class="form-group"><label class="col-md-2 control-label"><span class="text-bright">*</span>商户私钥</label><div class="col-md-8"><textarea class="form-control" rows="4" id="fastpay_private_key"></textarea></div></div>
            </div>
            <div class="form-group"><label class="col-md-2 control-label">汇聚支付分账</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpay_alt_is_use" ><label for="joinpay_alt_is_use" class=""></label></div><p class="help-block">多店铺使用支付则生成分账订单,子店铺需要配置相应的子商户号</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">自动分账</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpay_alt_is_auto" ><label for="joinpay_alt_is_auto" class=""></label></div><p class="help-block">启用自动分账则由系统自动执行分账操作,子店铺需要配置相应的子商户号</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">银行卡提现(朝夕付)</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpaytw_is_use" ><label for="joinpaytw_is_use" class=""></label></div><p class="help-block">银行卡提现业务由汇聚支付的朝夕付代付产品处理</p></div></div>
            <div class="form-group"><label class="col-md-2 control-label">朝夕付启用自动审核</label><div class="col-md-8"><div class="switch-inline"><input type="checkbox" id="joinpaytw_is_auto" ><label for="joinpaytw_is_auto" class=""></label></div><p class="help-block">银行卡提现业务开启自动审核则自动打款，否则需要在汇聚平台通过审核打款</p></div></div>
            <div class="form-group">
                <label class="col-md-2 control-label"></label>
                <div class="col-md-8">
                    <button class="btn btn-primary basic_set" type="submit">保存</button>
                    <a href="{:__URL('platform/config/sysconfig')}?act=payment" class="btn btn-default">返回</a>
                </div>
            </div>
        </div>
        </form>
        {else}
        <form class="form-horizontal padding-15 form-validate8888">
            <div class="form-group"><label class="col-md-2 control-label">汇聚支付</label><div class="col-md-8"><p class="help-block">当前版本未包含聚合支付应用。<a class="text-primary increment" href="javascript:void(0);" data-type="tl">立即开通</a>或<a class="text-primary" href="https://tb.53kf.com/code/client/fe6f8c99d694387455de7d72b5a4c85a9/1" target="_blank">联系客服</a></p></div></div>
        </form>
        {/if}
    </div>
    {/if}
</div>
<!--<input type="hidden" id="tl_cert" value="">-->
<!--<input type="hidden" id="tl_certkey" value="">-->
<!--微信-->
<input type="hidden" id="wx_wap" value="{$wx_wap['appid']}">
<input type="hidden" id="wx_mp" value="{$wx_mp['appid']}">
<input type="hidden" id="wx_app" value="{$wx_app['appid']}">
<input type="hidden" id="wx_wap_mch_id" value="{$wx_wap['mch_id']}">
<input type="hidden" id="wx_mp_mch_id" value="{$wx_mp['mch_id']}">
<input type="hidden" id="wx_app_mch_id" value="{$wx_app['mch_id']}">
<!--支付宝-->
<input type="hidden" id="ali_wap" value="{$ali_wap['ali_partnerid']}">
<input type="hidden" id="ali_app" value="{$ali_app['ali_partnerid']}">
<!--GlobePay-->
<input type="hidden" id="glp_wap" value="{$glp_wap['partner_code']}">
<input type="hidden" id="glp_mp" value="{$glp_mp['partner_code']}">
<!--通联-->
<input type="hidden" id="tl_wap" value="{$tl_wap['tl_cusid']}">
<input type="hidden" id="tl_mp" value="{$tl_mp['tl_cusid']}">
<input type="hidden" id="tl_app" value="{$tl_app['tl_cusid']}">

{/block}
{block name="script"}
<script>
    require(['util'],function(util){
        util.initPage(loading);
        function loading(){
            var pay_type = '{$pay_type}';
            var from = '{$from}';
            var blockchain = '{$blockchain}';
            $.ajax({
                'url':"{:__URL('PLATFORM_MAIN/Config/getPayList')}",
                'data':{pay_type:pay_type,from:from},
                'type':'post',
                success:function(data){
                    var html = ''; 
                    if (pay_type == '1') {
                        // data['pay_list'].forEach(function(v, i){
                        for (var i = 0; i < data['pay_list'].length; i++) {
                            var pay_key = data['pay_list'][i]['key'].toLowerCase();
                            
                            if (pay_key == 'tlpay' || pay_key == 'joinpay' || pay_key == 'glopay') {
                                continue;
                            }
                            
                            if (pay_key == 'eospay' && blockchain == 0) {
                                continue;
                            }
                            if (pay_key == 'ethpay' && blockchain == 0) {
                                continue;
                            }
                            if (i == 0) {
                                html += '<li role="presentation" class="active"><a href="#' + pay_key + '" aria-controls="' + pay_key + '"  data-type="' + pay_key + '" role="tab" data-toggle="tab" class="flex-auto-center">' + data['pay_list'][i]['pay_name'] + '</a></li>';
                            } else {
                                html += '<li role="presentation" class=""><a href="#' + pay_key + '" aria-controls="' + pay_key + '"  data-type="' + pay_key + '" role="tab" data-toggle="tab" class="flex-auto-center">' + data['pay_list'][i]['pay_name'] + '</a></li>';
                            }
                        }
                        $('.J-pay_list').html(html);
                        if (data['b_set']['is_use'] == '1') {
                            $('#bpay_is_use').attr('checked', 'true');
                        }
                        if (data['p_set']['is_use'] == '1') {
                            $('#ppay_is_use').attr('checked', 'true');
                        }
                        if (data['d_set']['is_use'] == '1') {
                            $('#dpay_is_use').attr('checked', 'true');
                        }
                        if (data['ali_set']['is_use'] == '1') {
                            $('#alipay_is_use').attr('checked', 'true');
                            $('.J-alipay').show();
                        }
                        if (data['ali_set']['value']['ali_cert_type'] == 1) {
                            $("#ali_cert_type").prop("checked", true);
                            $('.J-cert').show();
                            $('.J-notcert').hide();
                        } else {
                            $('.J-notcert').show();
                        }
                        if (data['wx_set']['value']['wx_tw'] == 1) {
                            $("#wxtw_is_use").prop("checked", true);
                            $('.J-wxtw').show();
                        }
                        if (data['wx_set']['is_use'] == '1') {
                            $('#wxpay_is_use').attr('checked', 'true');
                            $('.J-wxpay').show();
                        }
                        if (data['tl_set']['is_use'] == '1') {
                            $("#tlpay_is_use").prop("checked", true);
                            $('.J-tlpay').show();
                        }
                        if (data['tl_set']['value']['tl_tw'] == 1) {
                            $("#tltw_is_use").prop("checked", true);
                            $('.J-tltw').show();
                        }
                        if (data['eos_set'] && data['eos_set']['is_use'] == '1') {
                            $('#eospay_is_use').attr('checked', 'true');
                        }
                        if (data['eth_set'] && data['eth_set']['is_use'] == '1') {
                            $('#ethpay_is_use').attr('checked', 'true');
                        }
                        if (data['gp_set'] && data['gp_set']['is_use'] == '1') {
                            $('#gppay_is_use').attr('checked', 'true');
                            $('.globe').show();
                        }
                        if (data['gp_set'] && data['gp_set']['value']['currency'] == 'CNY') {
                            $("input[name='CURRENCY']:eq(1)").attr("checked", 'checked');
                        } else {
                            $("input[name='CURRENCY']:eq(0)").attr("checked", 'checked');
                        }
                        if (data['offline_set']['is_use'] == 1) {
                            $("#offlinepay_is_use").prop("checked", true);
                            $('.offlinepay_config').show();
                        }
                    }else if (pay_type == '2') {
                        for (var i = 0; i < data['pay_list'].length; i++) {
                            var pay_key = data['pay_list'][i]['key'].toLowerCase();
                            console.log("pay_key",pay_key)
                            if (pay_key == 'tlpaymp' || pay_key == 'joinpay' || pay_key == 'gppay') {
                                continue;
                            }
                            
                            if (pay_key == 'eospay' && blockchain == 0) {
                                continue;
                            }
                            if (pay_key == 'ethpay' && blockchain == 0) {
                                continue;
                            }
                            if (i == 0) {
                                html += '<li role="presentation" class="active"><a href="#' + pay_key + '" aria-controls="' + pay_key + '"  data-type="' + pay_key + '" role="tab" data-toggle="tab" class="flex-auto-center">' + data['pay_list'][i]['pay_name'] + '</a></li>';
                            } else {
                                html += '<li role="presentation" class=""><a href="#' + pay_key + '" aria-controls="' + pay_key + '"  data-type="' + pay_key + '" role="tab" data-toggle="tab" class="flex-auto-center">' + data['pay_list'][i]['pay_name'] + '</a></li>';
                            }
                        }
                        // data['pay_list'].forEach(function (v, i) {
                        //     var pay_key = v['key'].toLowerCase();
                        //     console.log("pay_key",pay_key)
                        //     if (pay_key == 'tlpay' || pay_key == 'joinpay' || pay_key == 'glopay') {
                        //         continue;
                        //     }
                        //     if (i == 0) {
                        //         html += '<li role="presentation" class="active"><a href="#' + pay_key + '" aria-controls="' + pay_key + '"  data-type="' + pay_key + '" role="tab" data-toggle="tab" class="flex-auto-center">' + v['pay_name'] + '</a></li>';
                        //     } else {
                        //         html += '<li role="presentation" class=""><a href="#' + pay_key + '" aria-controls="' + pay_key + '"  data-type="' + pay_key + '" role="tab" data-toggle="tab" class="flex-auto-center">' + v['pay_name'] + '</a></li>';
                        //     }
                        // })
                        $('.J-pay_list').html(html);
                        if (data['b_set']['is_use'] == '1') {
                            $('#bpay_is_use').attr('checked', 'true');
                        }
                        if (data['p_set']['is_use'] == '1') {
                            $('#ppay_is_use').attr('checked', 'true');
                        }
                        if (data['d_set']['is_use'] == '1') {
                            $('#dpay_is_use').attr('checked', 'true');
                        }
                        if (data['wx_set']['is_use'] == '1') {
                            $('#wxpay_is_use').attr('checked', 'true');
                            $('.J-wxpay').show();
                        }
                        if (data['wx_set']['value']['wx_tw'] == 1) {
                            $("#wxtw_is_use").prop("checked", true);
                            $('.J-wxtw').show();
                        }
                        if (data['tl_set']['is_use'] == '1') {
                            $("#tlpay_is_use").prop("checked", true);
                            $('.J-tlpay').show();
                        }
                        if (data['tl_set']['value']['tl_tw'] == 1) {
                            $("#tltw_is_use").prop("checked", true);
                            $('.J-tltw').show();
                        }
                        if (data['gp_set']['is_use'] == '1') {
                            $('#gppay_is_use').attr('checked', 'true');
                            $('.globe').show();
                        }
                        if (data['gp_set']['value']['currency'] == 'CNY') {
                            $("input[name='CURRENCY']:eq(1)").attr("checked", 'checked');
                        } else {
                            $("input[name='CURRENCY']:eq(0)").attr("checked", 'checked');
                        }
                        if (data['offline_set']['is_use'] == 1) {
                            $("#offlinepay_is_use").prop("checked", true);
                            $('.offlinepay_config').show();
                        }
                    } else if (pay_type == '3') {
                        data['pay_list'].forEach(function (v, i) {
                            var pay_key = v['key'].toLowerCase();
                            if (i == 0) {
                                html += '<li role="presentation" class="active"><a href="#' + pay_key + '" aria-controls="' + pay_key + '"  data-type="' + pay_key + '" role="tab" data-toggle="tab" class="flex-auto-center">' + v['pay_name'] + '</a></li>';
                            } else {
                                html += '<li role="presentation" class=""><a href="#' + pay_key + '" aria-controls="' + pay_key + '"  data-type="' + pay_key + '" role="tab" data-toggle="tab" class="flex-auto-center">' + v['pay_name'] + '</a></li>';
                            }
                        })
                        $('.J-pay_list').html(html);
                        if (data['b_set']['is_use'] == '1') {
                            $('#bpay_is_use').attr('checked', 'true');
                        }
                        if (data['d_set']['is_use'] == '1') {
                            $('#dpay_is_use').attr('checked', 'true');
                        }
                        if (data['ali_set']['is_use'] == '1') {
                            $('#alipay_is_use').attr('checked', 'true');
                            $('.J-alipay').show();
                        }
                        if (data['ali_set']['value']['ali_cert_type'] == 1) {
                            $("#ali_cert_type").prop("checked", true);
                            $('.J-cert').show();
                            $('.J-notcert').hide();
                        } else {
                            $('.J-notcert').show();
                        }
                        if (data['wx_set']['value']['wx_tw'] == 1) {
                            $("#wxtw_is_use").prop("checked", true);
                            $('.J-wxtw').show();
                        }
                        if (data['wx_set']['is_use'] == '1') {
                            $('#wxpay_is_use').attr('checked', 'true');
                            $('.J-wxpay').show();
                        }
                        if (data['tl_set']['is_use'] == '1') {
                            $("#tlpay_is_use").prop("checked", true);
                            $('.J-tlpay').show();
                        }
                        if (data['tl_set']['value']['tl_tw'] == 1) {
                            $("#tltw_is_use").prop("checked", true);
                            $('.J-tltw').show();
                        }
                        if (data['eos_set']['is_use'] == '1') {
                            $('#eospay_is_use').attr('checked', 'true');
                        }
                        if (data['eth_set']['is_use'] == '1') {
                            $('#ethpay_is_use').attr('checked', 'true');
                        }
                        if (data['offline_set']['is_use'] == 1) {
                            $("#offlinepay_is_use").prop("checked", true);
                            $('.offlinepay_config').show();
                        }
                    }
                    if(pay_type == '1' || pay_type == '2') {
                        //汇聚支付
                        if(data['joinpay_set']['is_use']==1){
                            $("#joinpay_is_use").prop("checked", true);
                            $('.J-joinpay').show();
                        }else{
                            $('.J-joinpay').hide();
                        }
						if(data['joinpay_set']['value']){
							if(data['joinpay_set']['value']['wx_use']==1){
								$("#joinpay_wx_is_use").prop("checked", true);
							}
							if(data['joinpay_set']['value']['fastpay_is_use']==1){
								$("#fastpay_is_use").prop("checked", true);
								$('.key_set').show();
							}
							if(data['joinpay_set']['value']['ali_use']==1){
								$("#joinpay_ali_is_use").prop("checked", true);
							}
							if(data['joinpay_set']['value']['joinpaytw_is_use']==1){
								$("#joinpaytw_is_use").prop("checked", true);
							}
							if(data['joinpay_set']['value']['joinpaytw_is_auto']==1){
								$("#joinpaytw_is_auto").prop("checked", true);
							}
							if(data['joinpay_set']['value']['joinpay_alt_is_use']==1){
								$("#joinpay_alt_is_use").prop("checked", true);
							}
							if(data['joinpay_set']['value']['joinpay_alt_is_auto']==1){
								$("#joinpay_alt_is_auto").prop("checked", true);
							}
							$("#p1_MerchantNo").val(data['joinpay_set']['value']['p1_MerchantNo']);
							$("#fastpay_public_key").val(data['joinpay_set']['value']['fastpay_public_key']);
							$("#fastpay_private_key").val(data['joinpay_set']['value']['fastpay_private_key']);
							$("#qa_TradeMerchantNo").val(data['joinpay_set']['value']['qa_TradeMerchantNo']);
							$("#hmacVal").val(data['joinpay_set']['value']['hmacVal']);
						}
                    }

                    if(pay_type == '1'){
                        //支付宝
                        $("#appid").val(data['ali_set']['value']['appid']);
                        $("#ali_partnerid").val(data['ali_set']['value']['ali_partnerid']);
                        $("#ali_seller").val(data['ali_set']['value']['ali_seller']);
                        $("#ali_key").val(data['ali_set']['value']['ali_key']);
                        $("#ali_wap_appid").val(data['ali_set']['value']['ali_wap_appid']);
                        $("#ali_app_appid").val(data['ali_set']['value']['ali_app_appid']);
                        $("#ali_public_key").val(data['ali_set']['value']['ali_public_key']);
                        $("#ali_private_key").val(data['ali_set']['value']['ali_private_key']);
                        $(".appCertPublicKey").val(data['ali_set']['value']['ali_cert_sn']);
                        $("#appCertPublicKey").val(data['ali_set']['value']['ali_cert_sn']);
                        $(".alipayCertPublicKey").val(data['ali_set']['value']['ali_public_key_cert']);
                        $("#alipayCertPublicKey").val(data['ali_set']['value']['ali_public_key_cert']);
                        $(".alipayRootCert").val(data['ali_set']['value']['ali_root_cert_sn']);
                        $("#alipayRootCert").val(data['ali_set']['value']['ali_root_cert_sn']);
                        //通联
                        $("#tl_cusid").val(data['tl_set']['value']['tl_cusid']);
                        $("#tl_key").val(data['tl_set']['value']['tl_key']);
                        $("#tl_appid").val(data['tl_set']['value']['tl_appid']);
                        $("#tl_username").val(data['tl_set']['value']['tl_username']);
                        $("#tl_id").val(data['tl_set']['value']['tl_id']);
                        $("#tl_password").val(data['tl_set']['value']['tl_password']);
                        $(".tl_cert").val(data['tl_set']['value']['tl_public']);
                        $(".tl_certkey").val(data['tl_set']['value']['tl_private']);
                        // $("#tl_cert").val(data['tl_set']['value']['tl_public']);
                        // $("#tl_certkey").val(data['tl_set']['value']['tl_private']);
                        //GlobePay
						if(data['gp_set']){
							$("#PARTNER_CODE").val(data['gp_set']['value']['partner_code']);
							$("#CREDENTIAL_CODE").val(data['gp_set']['value']['credential_code']);
						}
                        
                        //微信
                        $("#APP_KEY").val(data['wx_set']['value']['appid']);
                        $("#paySignKey").val(data['wx_set']['value']['mch_key']);
                        $("#MCHID").val(data['wx_set']['value']['mch_id']);
                        $("#MCH_KEY").val(data['wx_set']['value']['mch_key']);
                        $(".cert").val(data['wx_set']['value']['cert']);
                        $(".certkey").val(data['wx_set']['value']['certkey']);
                        // $("#cert").val(data['wx_set']['value']['cert']);
                        // $("#certkey").val(data['wx_set']['value']['certkey']);
                        $("#pay_name").val(data['offline_set']['value']['pay_name']);
                        $("#collection_memo").val(data['offline_set']['value']['collection_memo']);
                        if(data['offline_set']['value']['collection_code']) {
                            $('#collection_code').html('<a href="javascript:void(0);" class="close-box"><i class="icon icon-danger" title="删除"></i><img src="' + data['offline_set']['value']['collection_code'] + '"></a>');
                        }else{
                            $('#collection_code').html('<a href="javascript:void(0);" class="plus-box" data-toggle="singlePicture"><i class="icon icon-plus"></i></a>');
                        }
                    }
                    if(pay_type == '2'){
                        //通联
                        $("#tl_cusid").val(data['tl_set']['value']['tl_cusid']);
                        $("#tl_key").val(data['tl_set']['value']['tl_key']);
                        $("#tl_appid").val(data['tl_set']['value']['tl_appid']);
                        $("#tl_username").val(data['tl_set']['value']['tl_username']);
                        $("#tl_id").val(data['tl_set']['value']['tl_id']);
                        $("#tl_password").val(data['tl_set']['value']['tl_password']);
                        $(".tl_cert").val(data['tl_set']['value']['tl_public']);
                        $(".tl_certkey").val(data['tl_set']['value']['tl_private']);
                        // $("#tl_cert").val(data['tl_set']['value']['tl_public']);
                        // $("#tl_certkey").val(data['tl_set']['value']['tl_private']);
                        //GlobePay
						if(data['gp_set']){
							$("#PARTNER_CODE").val(data['gp_set']['value']['partner_code']);
							$("#CREDENTIAL_CODE").val(data['gp_set']['value']['credential_code']);
						}
                        
                        //微信
                        $("#APP_KEY").val(data['wx_set']['value']['appid']);
                        $("#paySignKey").val(data['wx_set']['value']['mch_key']);
                        $("#MCHID").val(data['wx_set']['value']['mchid']);
                        $(".cert").val(data['wx_set']['value']['cert']);
                        $(".certkey").val(data['wx_set']['value']['certkey']);
                        // $("#cert").val(data['wx_set']['value']['cert']);
                        // $("#certkey").val(data['wx_set']['value']['certkey']);
                        $("#pay_name").val(data['offline_set']['value']['pay_name']);
                        $("#collection_memo").val(data['offline_set']['value']['collection_memo']);
                        if(data['offline_set']['value']['collection_code']) {
                            $('#collection_code').html('<a href="javascript:void(0);" class="close-box"><i class="icon icon-danger" title="删除"></i><img src="' + data['offline_set']['value']['collection_code'] + '"></a>');
                        }else{
                            $('#collection_code').html('<a href="javascript:void(0);" class="plus-box" data-toggle="singlePicture"><i class="icon icon-plus"></i></a>');
                        }
                    }
                    if(pay_type == '3'){
                        //支付宝
                        $("#appid").val(data['ali_set']['value']['appid']);
                        $("#ali_partnerid").val(data['ali_set']['value']['ali_partnerid']);
                        $("#ali_seller").val(data['ali_set']['value']['ali_seller']);
                        $("#ali_key").val(data['ali_set']['value']['ali_key']);
                        $("#ali_wap_appid").val(data['ali_set']['value']['ali_wap_appid']);
                        $("#ali_app_appid").val(data['ali_set']['value']['ali_app_appid']);
                        $("#ali_public_key").val(data['ali_set']['value']['ali_public_key']);
                        $("#ali_private_key").val(data['ali_set']['value']['ali_private_key']);
                        $(".appCertPublicKey").val(data['ali_set']['value']['ali_cert_sn']);
                        $("#appCertPublicKey").val(data['ali_set']['value']['ali_cert_sn']);
                        $(".alipayCertPublicKey").val(data['ali_set']['value']['ali_public_key_cert']);
                        $("#alipayCertPublicKey").val(data['ali_set']['value']['ali_public_key_cert']);
                        $(".alipayRootCert").val(data['ali_set']['value']['ali_root_cert_sn']);
                        $("#alipayRootCert").val(data['ali_set']['value']['ali_root_cert_sn']);
                        //通联
                        $("#tl_cusid").val(data['tl_set']['value']['tl_cusid']);
                        $("#tl_key").val(data['tl_set']['value']['tl_key']);
                        $("#tl_appid").val(data['tl_set']['value']['tl_appid']);
                        $("#tl_username").val(data['tl_set']['value']['tl_username']);
                        $("#tl_id").val(data['tl_set']['value']['tl_id']);
                        $("#tl_password").val(data['tl_set']['value']['tl_password']);
                        $(".tl_cert").val(data['tl_set']['value']['tl_public']);
                        $(".tl_certkey").val(data['tl_set']['value']['tl_private']);
                        // $("#tl_cert").val(data['tl_set']['value']['tl_public']);
                        // $("#tl_certkey").val(data['tl_set']['value']['tl_private']);
                        //微信
                        $("#APP_KEY").val(data['wx_set']['value']['appid']);
                        $("#paySignKey").val(data['wx_set']['value']['mch_key']);
                        $("#MCHID").val(data['wx_set']['value']['mch_id']);
                        $("#MCH_KEY").val(data['wx_set']['value']['mch_key']);
                        $(".cert").val(data['wx_set']['value']['cert']);
                        $(".certkey").val(data['wx_set']['value']['certkey']);
                        // $("#cert").val(data['wx_set']['value']['cert']);
                        // $("#certkey").val(data['wx_set']['value']['certkey']);
                        $("#pay_name").val(data['offline_set']['value']['pay_name']);
                        $("#collection_memo").val(data['offline_set']['value']['collection_memo']);
                        if(data['offline_set']['value']['collection_code']) {
                            $('#collection_code').html('<a href="javascript:void(0);" class="close-box"><i class="icon icon-danger" title="删除"></i><img src="' + data['offline_set']['value']['collection_code'] + '"></a>');
                        }else{
                            $('#collection_code').html('<a href="javascript:void(0);" class="plus-box" data-toggle="singlePicture"><i class="icon icon-plus"></i></a>');
                        }
                    }
                }
            })
        }
        //微信
        // $('body').on('click', '#wxpay_is_use', function () {
        //     if($(this).is(':checked')){
        //         $('.J-wxpay').show();
        //     }else{
        //         $('.J-wxpay').hide();
        //     }
        // });
        //汇聚支付设置开始
        $('body').on('click', '#joinpay_is_use', function () {
            if($(this).is(':checked')){
                $('.J-joinpay').show();
            }else{
                $('.J-joinpay').hide();
            }
        });
        $('body').on('click', '#fastpay_is_use', function () {
            if($(this).is(':checked')){
                var port = $(this).data('type');
                checkPayStatus('TLPAY',1,'fastpay_is_use',port);
                $('.key_set').show();
            }else{
                $('.key_set').hide();
            }
        });
        //查询是否重复开启
        $('body').on('click', '#joinpay_wx_is_use', function () {
            if($(this).is(':checked')){
                var port = $(this).data('type');
                checkPayStatus('WPAY',1,'joinpay_wx_is_use',port);
                
            }else{
                $('.key_set').hide();
            }
        });
        $('body').on('click', '#joinpay_ali_is_use', function () {
            if($(this).is(':checked')){
                var port = $(this).data('type');
                checkPayStatus('ALIPAY',1,'joinpay_ali_is_use',port);
                
            }else{
                $('.key_set').hide();
            }
        });
        // $('body').on('click', '#fastpay_is_use', function () {
        //     if($(this).is(':checked')){
        //         var port = $(this).data('type');
        //         checkPayStatus('TLPAY',1,'fastpay_is_use',port);
                
        //     }else{
        //         $('.key_set').hide();
        //     }
        // });
        //t WPAY 微信 ALIPAY 支付宝 TLPAY 银行卡
        //j joinpay 1 其他0
        //m 选项id
        //p 端口 
        function checkPayStatus(t,j,m,p){
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/checkPayStatus')}",
                data:{
                    'type' : t,
                    'port' : p,
                    'joinpay' : j
                },
                async:true,
                success:function (data) {
                    if (data["code"] < 0) {
                        show_message(data['message'],m,t,j,p);
                        return 1;
                    }
                }
            });
        }
        function show_message(message,m,t,j,p){
            util.confirm(message, '',function(){
                //获取实际需要变更的key 直接关闭
                savePaySeetings(t,j,p);
            },'','',function(){
                console.log('m',m,'t',t,'j',j,'p',p)
                //取消设置，变更为未选中
                $("#"+m).removeAttr("checked");
              
                if(m == 'fastpay_is_use'){
                    $('.key_set').hide();
                }
                if(m == 'wxpay_is_use'){
                    $('.J-wxpay').hide();
                }
                if(m == 'alipay_is_use'){
                    $('.J-alipay').hide();
                }
                if(m == 'tlpay_is_use'){
                    $('.J-tlpay').hide();
                }
            })
        }
        //执行关闭操作 关闭微信 支付宝 银行卡等等
        function savePaySeetings(t,j,p){
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/changePayConfig')}",
                data:{
                    'type' : t,
                    'port' : p,
                    'joinpay' : j
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        }
        //保存汇聚设置
        util.validate($('.form-validate88'), function(form){
            if($('.form-validate88').find('#joinpay_is_use').is(':checked')){
                var is_use =1;
            }
            var p1_MerchantNo = $("#p1_MerchantNo").val();
            var qa_TradeMerchantNo = $("#qa_TradeMerchantNo").val();
            var hmacVal = $("#hmacVal").val();
            var joinpay_wx_appId = $("#joinpay_wx_appId").val();
            var fastpay_public_key = $("#fastpay_public_key").val();
            var fastpay_private_key = $("#fastpay_private_key").val();
            if($('.form-validate88').find('#joinpay_wx_is_use').is(':checked')){
                var wx_is_use =1;
                if(joinpay_wx_appId == ''){
                    util.message( '启用汇聚微信支付需填写WEIXIN_APP_AppId或者WEIXIN_GZH_AppId','danger');
                    return false;
                }
            }
            if($('.form-validate88').find('#joinpay_ali_is_use').is(':checked')){
                var ali_is_use =1;
            }
            if($('.form-validate88').find('#joinpaytw_is_use').is(':checked')){
                var joinpaytw_is_use =1;
            }
            if($('.form-validate88').find('#joinpaytw_is_auto').is(':checked')){
                var joinpaytw_is_auto =1;
            }
            if($('.form-validate88').find('#fastpay_is_use').is(':checked')){
                var fastpay_is_use =1;
            }
            if($('.form-validate88').find('#joinpay_alt_is_use').is(':checked')){
                var joinpay_alt_is_use =1;
            }
            if($('.form-validate88').find('#joinpay_alt_is_auto').is(':checked')){
                var joinpay_alt_is_auto =1;
            }
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/joinPayConfig')}",
                data:{
                    'port' : '',
                    'is_use' : is_use,
                    'p1_MerchantNo' : p1_MerchantNo,
                    'qa_TradeMerchantNo' : qa_TradeMerchantNo,
                    'hmacVal' : hmacVal,
                    'joinpay_wx_appId' : joinpay_wx_appId,
                    'wx_is_use' : wx_is_use,
                    'ali_is_use' : ali_is_use,
                    'joinpaytw_is_use' : joinpaytw_is_use,
                    'joinpaytw_is_auto' : joinpaytw_is_auto,
                    'fastpay_is_use' : fastpay_is_use,
                    'fastpay_public_key' : fastpay_public_key,
                    'fastpay_private_key' : fastpay_private_key,
                    'joinpay_alt_is_use' : joinpay_alt_is_use,
                    'joinpay_alt_is_auto' : joinpay_alt_is_auto,
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success',loading('payment'));
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        });
        util.validate($('.form-validate888'), function(form){
            if($('.form-validate888').find('#joinpay_is_use').is(':checked')){
                var is_use =1;
            }
            var p1_MerchantNo = $("#p1_MerchantNo").val();
            var qa_TradeMerchantNo = $("#qa_TradeMerchantNo").val();
            var hmacVal = $("#hmacVal").val();
            var joinpay_wx_appId = $("#joinpay_wx_appId").val();
            var fastpay_public_key = $("#fastpay_public_key").val();
            var fastpay_private_key = $("#fastpay_private_key").val();
            if($('.form-validate888').find('#joinpay_wx_is_use').is(':checked')){
                var wx_is_use =1;
                if(joinpay_wx_appId == ''){
                    util.message( '启用汇聚微信支付需填写WEIXIN_APP_AppId或者WEIXIN_GZH_AppId','danger');
                    return false;
                }
            }
            if($('.form-validate888').find('#joinpay_ali_is_use').is(':checked')){
                var ali_is_use =1;
            }
            if($('.form-validate888').find('#joinpaytw_is_use').is(':checked')){
                var joinpaytw_is_use =1;
            }
            if($('.form-validate888').find('#joinpaytw_is_auto').is(':checked')){
                var joinpaytw_is_auto =1;
            }
            if($('.form-validate888').find('#fastpay_is_use').is(':checked')){
                var fastpay_is_use =1;
            }
            if($('.form-validate888').find('#joinpay_alt_is_use').is(':checked')){
                var joinpay_alt_is_use =1;
            }
            if($('.form-validate888').find('#joinpay_alt_is_auto').is(':checked')){
                var joinpay_alt_is_auto =1;
            }
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/joinPayConfig')}",
                data:{
                    'port' : 'mp',
                    'is_use' : is_use,
                    'p1_MerchantNo' : p1_MerchantNo,
                    'qa_TradeMerchantNo' : qa_TradeMerchantNo,
                    'hmacVal' : hmacVal,
                    'joinpay_wx_appId' : joinpay_wx_appId,
                    'wx_is_use' : wx_is_use,
                    'ali_is_use' : ali_is_use,
                    'joinpaytw_is_use' : joinpaytw_is_use,
                    'joinpaytw_is_auto' : joinpaytw_is_auto,
                    'fastpay_is_use' : fastpay_is_use,
                    'fastpay_public_key' : fastpay_public_key,
                    'fastpay_private_key' : fastpay_private_key,
                    'joinpay_alt_is_use' : joinpay_alt_is_use,
                    'joinpay_alt_is_auto' : joinpay_alt_is_auto,
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success',loading('payment'));
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        });
        util.validate($('.form-validate8888'), function(form){
            if($('.form-validate8888').find('#joinpay_is_use').is(':checked')){
                var is_use =1;
            }
            var p1_MerchantNo = $("#p1_MerchantNo").val();
            var qa_TradeMerchantNo = $("#qa_TradeMerchantNo").val();
            var hmacVal = $("#hmacVal").val();
            var fastpay_public_key = $("#fastpay_public_key").val();
            var fastpay_private_key = $("#fastpay_private_key").val();
            if($('.form-validate8888').find('#joinpay_wx_is_use').is(':checked')){
                var wx_is_use =1;
            }
            if($('.form-validate8888').find('#joinpay_ali_is_use').is(':checked')){
                var ali_is_use =1;
                if(joinpay_wx_appId == ''){
                    util.message( '启用汇聚微信支付需填写WEIXIN_APP_AppId或者WEIXIN_GZH_AppId','danger');
                    return false;
                }
            }
            if($('.form-validate8888').find('#joinpaytw_is_use').is(':checked')){
                var joinpaytw_is_use =1;
            }
            if($('.form-validate8888').find('#joinpaytw_is_auto').is(':checked')){
                var joinpaytw_is_auto =1;
            }
            if($('.form-validate8888').find('#fastpay_is_use').is(':checked')){
                var fastpay_is_use =1;
            }
            if($('.form-validate8888').find('#joinpay_alt_is_use').is(':checked')){
                var joinpay_alt_is_use =1;
            }
            if($('.form-validate8888').find('#joinpay_alt_is_auto').is(':checked')){
                var joinpay_alt_is_auto =1;
            }
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/joinPayConfig')}",
                data:{
                    'port' : 'app',
                    'is_use' : is_use,
                    'p1_MerchantNo' : p1_MerchantNo,
                    'qa_TradeMerchantNo' : qa_TradeMerchantNo,
                    'hmacVal' : hmacVal,
                    'joinpay_wx_appId' : joinpay_wx_appId,
                    'wx_is_use' : wx_is_use,
                    'ali_is_use' : ali_is_use,
                    'joinpaytw_is_use' : joinpaytw_is_use,
                    'joinpaytw_is_auto' : joinpaytw_is_auto,
                    'fastpay_is_use' : fastpay_is_use,
                    'fastpay_public_key' : fastpay_public_key,
                    'fastpay_private_key' : fastpay_private_key,
                    'joinpay_alt_is_use' : joinpay_alt_is_use,
                    'joinpay_alt_is_auto' : joinpay_alt_is_auto,
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success',loading('payment'));
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        });
        //汇聚支付设置结束
        $('body').on('click', '#wxtw_is_use', function () {
            if($(this).is(':checked')){
                $('.J-wxtw').show();
            }else{
                $('.J-wxtw').hide();
            }
        });
        $('body').on('click','.J-btnwx',function(){
            var _this=$(this);
            var certpem = $("#cert").val();
            var certkeypem = $("#certkey").val();
            var cert =  _this.parent().siblings().hasClass("cert");
            var certkey =  _this.parent().siblings().hasClass("certkey");
            var type = 'weixin/'+_this.data('type');
            if(cert){
                var path = "{:__URL('PLATFORM_MAIN/upload/uploadFiles')}"+'?file='+ type +'&cert='+certpem+'&certtype=1';
            }
            if(certkey){
                var path = "{:__URL('PLATFORM_MAIN/upload/uploadFiles')}"+'?file='+ type +'&certkey='+certkeypem+'&certtype=2';
            }
            util.attachmentUpload(path,function (file_url) {
                if(file_url.state == '1'){
                    if(file_url.certtype == '1'){
                        $(".cert").val(file_url.filesrc)
                        // $("#cert").val(file_url.filesrc)
                    }
                    if(file_url.certtype == '2'){
                        $(".certkey").val(file_url.filesrc)
                        // $("#certkey").val(file_url.filesrc)
                    }
                }
            })
        })
        
        //支付宝
        // $('body').on('click', '#alipay_is_use', function () {
        //     if($(this).is(':checked')){
        //         $('.J-alipay').show();
        //     }else{
        //         $('.J-alipay').hide();
        //     }
        // });
        $('body').on('click', '#ali_cert_type', function () {
            if($(this).is(':checked')){
                $('.J-cert').show();
                $('.J-notcert').hide();
            }else{
                $('.J-cert').hide();
                $('.J-notcert').show();
            }
        });
        $('body').on('click','.J-btnali',function(){
            var _this=$(this);
            var appCertPublicKey = $("#appCertPublicKey").val();
            var alipayCertPublicKey = $("#alipayCertPublicKey").val();
            var alipayRootCert = $("#alipayRootCert").val();
            var hasappCertPublicKey =  _this.parent().siblings().hasClass("appCertPublicKey");
            var hasalipayCertPublicKey =  _this.parent().siblings().hasClass("alipayCertPublicKey");
            var hasalipayRootCert =  _this.parent().siblings().hasClass("alipayRootCert");
            var type = _this.data('type');
            if(hasappCertPublicKey){
                var path = "{:__URL('PLATFORM_MAIN/upload/uploadFileAlipay')}"+'?file='+type+'&appCertPublicKey='+appCertPublicKey+'&certtype=1';
            }
            if(hasalipayCertPublicKey){
                var path = "{:__URL('PLATFORM_MAIN/upload/uploadFileAlipay')}"+'?file='+type+'&alipayCertPublicKey='+alipayCertPublicKey+'&certtype=2';
            }
            if(hasalipayRootCert){
                var path = "{:__URL('PLATFORM_MAIN/upload/uploadFileAlipay')}"+'?file='+type+'&alipayRootCert='+alipayRootCert+'&certtype=3';
            }
            util.attachmentUpload(path,function (file_url) {
                if(file_url.state == '1'){
                    if(file_url.certtype == '1'){
                        $(".appCertPublicKey").val(file_url.filesrc)
                        // $("#appCertPublicKey").val(file_url.filesrc)
                    }
                    if(file_url.certtype == '2'){
                        $(".alipayCertPublicKey").val(file_url.filesrc)
                        // $("#alipayCertPublicKey").val(file_url.filesrc)
                    }
                    if(file_url.certtype == '3'){
                        $(".alipayRootCert").val(file_url.filesrc)
                        // $("#alipayRootCert").val(file_url.filesrc)
                    }
                }
            })
        })
        $('body').on('click','.J-btnssl',function(){
            //todo... 暂时没用
            var _this=$(this);
            var sslpem = $("#ssl").val();
            var realm_ip = $("#realm_ip").val();
            var realm_two_ip = $('#realm_two_ip').val();
            var sslkeypem = $("#sslkey").val();
            var ssl =  _this.parent().siblings().hasClass("ssl");
            var sslkey =  _this.parent().siblings().hasClass("sslkey");
            if(!realm_ip){
                util.message('请填写域名地址');
                $('#realm_ip').focus();
                return false;
            }
            if(ssl){
                var path = "{:__URL('PLATFORM_MAIN/upload/uploadSsl')}"+'?ssl='+sslpem+'&certtype=1&realm_ip='+realm_ip+'&realm_two_ip='+realm_two_ip;
            }
            if(sslkey){
                var path = "{:__URL('PLATFORM_MAIN/upload/uploadSsl')}"+'?sslkey='+sslkeypem+'&certtype=2&realm_ip='+realm_ip+'&realm_two_ip='+realm_two_ip;
            }
            util.attachmentUpload(path,function (file_url) {
                if(file_url.state == '1'){
                    if(file_url.certtype == '1'){
                        $(".ssl").val(file_url.filename);
                        $("#ssl").val(file_url.filesrc);
                    }
                    if(file_url.certtype == '2'){
                        $(".sslkey").val(file_url.filename);
                        $("#sslkey").val(file_url.filesrc);
                    }
                }
            });
        });
        //通联配置
        // $('body').on('click', '#tlpay_is_use', function () {
        //     if($(this).is(':checked')){
        //         $('.J-tlpay').show();
        //         $('#tltw_is_use').click();
        //     }else{
        //         $('.J-tlpay').hide();
        //         $('#tltw_is_use').click();
        //     }
        // });
        $('body').on('click', '#tltw_is_use', function () {
            if($(this).is(':checked')){
                $('.J-tltw').show();
                $('#tl_id').attr('required','required');
                $('#tl_username').attr('required','required');
                $('#tl_password').attr('required','required');
            }else{
                $('.J-tltw').hide();
                $('#tl_id').removeAttr('required',true);
                $('#tl_username').removeAttr('required',true);
                $('#tl_password').removeAttr('required',true);
            }
        });
        $('body').on('click','.J-key',function(){
            var letters = 'abcdefghijklmnopqrstuvwxyz0123456789';
            var token = '';
            for(var i = 0; i < 32; i++) {
                var j = parseInt(Math.random() * (31 + 1));
                token += letters[j];
            }
            $('#paySignKey').val(token);
        })
        $('body').on('click','.J-appid',function(){
            var type = $(this).data('type');
            if (type == 'wap') {
                $('#APP_KEY').val($("#wx_wap").val());
            }
            if (type == 'mp') {
                $('#APP_KEY').val($("#wx_mp").val());
            }
            if (type == 'app') {
                $('#APP_KEY').val($("#wx_app").val());
            }
        })
        $('body').on('click','.J-btntl',function(){
            var tl_password = $("#tl_password").val();
            if(tl_password){
                var _this=$(this);
                // var tlcertpem = $("#tl_cert").val();
                var tlcertpem = $(".tl_cert").val();
                // var tlcertkeypem = $("#tl_certkey").val();
                var tlcertkeypem = $(".tl_certkey").val();
                var tl_cert =  _this.parent().siblings().hasClass("tl_cert");
                var tl_certkey =  _this.parent().siblings().hasClass("tl_certkey");
                var type = _this.data('type');
                if(tl_cert){
                    var path = "{:__URL('PLATFORM_MAIN/upload/uploadTlFiles')}"+'?file='+type+'&cert='+tlcertpem+'&certtype=1&tl_password='+tl_password;
                }
                if(tl_certkey){
                    var path = "{:__URL('PLATFORM_MAIN/upload/uploadTlFiles')}"+'?file='+type+'&certkey='+tlcertkeypem+'&certtype=2&tl_password='+tl_password;
                }
                util.attachmentUpload(path,function (file_url) {
                    if(file_url.state == '1'){
                        if(file_url.certtype == '1'){
                            $(".tl_cert").val(file_url.filesrc)
                            // $("#tl_cert").val(file_url.filesrc)
                        }
                        if(file_url.certtype == '2'){
                            $(".tl_certkey").val(file_url.filesrc)
                            // $("#tl_certkey").val(file_url.filesrc)
                        }
                    }
                })
            }else{
                util.message('请填写用户密码');
                $('#tl_password').focus();
                return false;
            }

        })
        //GlobePay
        $('body').on('click', '#gppay_is_use', function () {
            if($(this).is(':checked')){
                $('.globe').show();
                $('#PARTNER_CODE').attr('required','required');
                $('#CREDENTIAL_CODE').attr('required','required');
            }else{
                $('.globe').hide();
                $('#PARTNER_CODE').removeAttr('required',true);
                $('#CREDENTIAL_CODE').removeAttr('required',true);
            }
        });
        //线下转款支付
        $('body').on('click', '#offlinepay_is_use', function () {
            if($(this).is(':checked')){
                $('.offlinepay_config').show();
            }else{
                $('.offlinepay_config').hide();
            }
        });

        util.copy2('.copy8','call_payback_url1');
        util.copy2('.copy9','realm_ip_h5');
        util.copy2('.copy10','call_payback_url2');
        util.copy2('.copy11','realm_two_ip_h5');

        //******* WAP ********//
        util.validate($('.form-validate1'),function(form){
            if($('.form-validate1').find('#bpay_is_use').is(':checked')){
                var is_use =1;
            }
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/bPayConfig')}",
                data:{
                    'is_use' : is_use
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })

        //******* WAP ********//
        util.validate($('.form-validate223'),function(form){
            if($('.form-validate223').find('#ppay_is_use').is(':checked')){
                var is_use =1;
            }
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/pPayConfig')}",
                data:{
                    'is_use' : is_use
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //货到付款
        util.validate($('.form-validate2'),function(form){
            if($('.form-validate2').find('#dpay_is_use').is(':checked')){
                var is_use =1;
            }
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/dPayConfig')}",
                data:{
                    'is_use' : is_use
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //wap 微信支付
        util.validate($('.form-validate3'),function(form){
            if($('.form-validate3').find('#wxpay_is_use').is(':checked')){
                var is_use =1;//微信支付开关
            }
            if($('.form-validate3').find('#wxtw_is_use').is(':checked')){
                var wx_tw =1;//微信提现开关
            }
            var appkey = $("#APP_KEY").val();//AppID
            var MCHID = $("#MCHID").val();//MCHID
            var paySignKey = $("#paySignKey").val();//API秘钥
            var cert = $(".cert").val();//cert证书
            var certkey = $(".certkey").val();//cert证书
            if(is_use == 1){
                if(appkey==''){
                    util.message('请填写应用ID[AppID]');
                    $('.form-validate3').find('#appkey').focus();
                    return false;
                }
                if(paySignKey==''){
                    util.message('请填写API秘钥');
                    $('.form-validate3').find('#paySignKey').focus();
                    return false;
                }
                if(MCHID==''){
                    util.message('请填写微信支付商户号[MCHID]');
                    $('.form-validate3').find('#MCHID').focus();
                    return false;
                }
            }
            if(wx_tw ==1){
                if(cert==''){
                    util.message('请上传数字证书[pem]');
                    return false;
                }
                if(certkey==''){
                    util.message('请上传数字证书秘钥[pem]');
                    return false;
                }
            }
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/payConfig')}",
                data:{
                    'appkey':appkey,
                    'MCHID':MCHID,
                    'paySignKey':paySignKey,
                    'is_use' : is_use,
                    'cert':cert,
                    'certkey':certkey,
                    'wx_tw':wx_tw
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        });
        //wap 支付宝
        util.validate($('.form-validate4'),function(form){
            if($('.form-validate4').find('#alipay_is_use').is(':checked')){
                var is_use =1;
            }
            var ali_cert_type = 0;
            if($('.form-validate4').find('#ali_cert_type').is(':checked')){
                ali_cert_type =1;
            }
            var ali_partnerid = $("#ali_partnerid").val();
            var ali_seller = $("#ali_seller").val();
            var ali_key = $("#ali_key").val();
            var appid = $("#appid").val();
            var ali_public_key = $("#ali_public_key").val();
            var ali_private_key = $("#ali_private_key").val();
            var ali_cert_sn = $(".appCertPublicKey").val();
            var ali_public_key_cert = $(".alipayCertPublicKey").val();
            var ali_root_cert_sn = $(".alipayRootCert").val();
            if(is_use){
                if(ali_partnerid==''){
                    util.message('请填写合作者身份ID');
                    $('.form-validate4').find('#ali_partnerid').focus();
                    return false;
                }
                if(ali_seller==''){
                    util.message('请填写支付宝账号');
                    $('.form-validate4').find('#ali_seller').focus();
                    return false;
                }
                if(ali_key==''){
                    util.message('请填写安全校验码');
                    $('.form-validate4').find('#ali_key').focus();
                    return false;
                }
                if(appid==''){
                    util.message('请填写APPID');
                    $('.form-validate4').find('#appid').focus();
                    return false;
                }
                if(ali_cert_type == 0 && ali_public_key==''){
                    util.message('请填写支付宝公钥');
                    $('.form-validate4').find('#ali_public_key').focus();
                    return false;
                }
                if(ali_private_key==''){
                    util.message('请填写商户私钥');
                    $('.form-validate4').find('#ali_private_key').focus();
                    return false;
                }
                if(ali_cert_type ==1){
                    if(ali_cert_sn==''){
                        util.message('请上传appCertPublicKey证书');
                        return false;
                    }
                    if(ali_public_key_cert==''){
                        util.message('请上传alipayCertPublicKey证书');
                        return false;
                    }
                    if(ali_root_cert_sn==''){
                        util.message('请上传alipayRootCert证书');
                        return false;
                    }
                }
            }
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/payAliConfig')}",
                data:{
                    'ali_partnerid':ali_partnerid,
                    'ali_seller':ali_seller,
                    'ali_key':ali_key,
                    'appid':appid,
                    'ali_public_key':ali_public_key,
                    'ali_private_key':ali_private_key,
                    'is_use':is_use,
                    'ali_cert_type':ali_cert_type,
                    'ali_cert_sn':ali_cert_sn,
                    'ali_public_key_cert':ali_public_key_cert,
                    'ali_root_cert_sn':ali_root_cert_sn
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //wap 通联
        util.validate($('.form-validate5'),function(form){
            if($('.form-validate5').find('#tlpay_is_use').is(':checked')){
                var is_use =1;
            }
            if($('.form-validate5').find('#tltw_is_use').is(':checked')){
                var tl_tw =1;
            }
            var tl_cusid = $("#tl_cusid").val();
            var tl_key = $("#tl_key").val();
            var tl_appid = $("#tl_appid").val();
            var tl_id = $("#tl_id").val();
            var tl_username = $("#tl_username").val();
            var tl_password = $("#tl_password").val();
            var tl_public = $(".tl_cert").val();
            var tl_private = $(".tl_certkey").val();
            if(is_use){
                if(tl_cusid==''){
                    util.message('请填写收银宝商户号');
                    $('.form-validate5').find('#ali_partnerid').focus();
                    return false;
                }
                if(tl_appid==''){
                    util.message('请填写收银宝APPID');
                    $('.form-validate5').find('#appid').focus();
                    return false;
                }
                if(tl_key==''){
                    util.message('请填写收款账户MD5密钥');
                    $('.form-validate5').find('#ali_key').focus();
                    return false;
                }
            }
            if(is_use && tl_tw){
                if(tl_id==''){
                    util.message('请填写通联通商户号');
                    $('.form-validate5').find('#tl_id').focus();
                    return false;
                }
                if(tl_username==''){
                    util.message('请填写用户名');
                    $('.form-validate5').find('#tl_username').focus();
                    return false;
                }
                if(tl_password==''){
                    util.message('请填写用户名密码');
                    $('.form-validate5').find('#tl_password').focus();
                    return false;
                }
                if(tl_public==''){
                    util.message('请上传数字证书');
                    $('.form-validate5').find('.tl_cert').focus();
                    return false;
                }
                if(tl_private==''){
                    util.message('请上传证书秘钥');
                    $('.form-validate5').find('.tl_certkey').focus();
                    return false;
                }
            }
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/tlPayConfig')}",
                data:{
                    'tl_cusid':tl_cusid,
                    'tl_key':tl_key,
                    'tl_appid':tl_appid,
                    'tl_id':tl_id,
                    'tl_username':tl_username,
                    'tl_password':tl_password,
                    'tl_public':tl_public,
                    'tl_private':tl_private,
                    'is_use':is_use,
                    'tl_tw':tl_tw
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        });
        // wap eos付款配置
        util.validate($('.form-validate6'),function(form){
            $.ajax({
                'url':"{:__URL('PLATFORM_MAIN/system/getCoinConfig')}",
                'type':'post',
                'data':{},
                success:function(data){
                    if(data.eos_status == 0){
                        util.alert('商城还没有配置eos钱包，请先配置。', function () {
                            window.open("{:__URL('ADDONS_MAINblockChainBasicSetting')}");
                            util.alert('是否已配置完成？', function(){
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/system/getCoinConfig')}",
                                    'type':'post',
                                    'data':{},
                                    success:function(data){
                                        if(data.eos_status == 1){
                                            if($('.form-validate6').find('#eospay_is_use').is(':checked')){
                                                var is_use =1;
                                            }
                                            $.ajax({
                                                type:"post",
                                                url:"{:__URL('PLATFORM_MAIN/config/eosPayConfig')}",
                                                data:{
                                                    'is_use' : is_use
                                                },
                                                async:true,
                                                success:function (data) {
                                                    if (data["code"] > 0) {
                                                        util.message( data["message"],'success');
                                                    }else{
                                                        util.message( data["message"],'danger');
                                                    }
                                                }
                                            });
                                        }else{
                                            util.message('eos未完成配置','danger');
                                            return false;
                                        }
                                    }
                                })
                            })
                        })
                    }else{
                        if($('.form-validate6').find('#eospay_is_use').is(':checked')){
                            var is_use =1;
                        }
                        $.ajax({
                            type:"post",
                            url:"{:__URL('PLATFORM_MAIN/config/eosPayConfig')}",
                            data:{
                                'is_use' : is_use
                            },
                            async:true,
                            success:function (data) {
                                if (data["code"] > 0) {
                                    util.message( data["message"],'success');
                                }else{
                                    util.message( data["message"],'danger');
                                }
                            }
                        });
                    }
                }
            })
        })
        // wap eth付款配置
        util.validate($('.form-validate7'),function(form){
            $.ajax({
                'url':"{:__URL('PLATFORM_MAIN/system/getCoinConfig')}",
                'type':'post',
                'data':{},
                success:function(data){
                    if(data.eth_status == 0){
                        util.alert('商城还没有配置eth钱包，请先配置。', function () {
                            window.open("{:__URL('ADDONS_MAINblockChainBasicSetting')}");
                            util.alert('是否已配置完成？', function(){
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/system/getCoinConfig')}",
                                    'type':'post',
                                    'data':{},
                                    success:function(data){
                                        if(data.eth_status == 1){
                                            if($('.form-validate7').find('#ethpay_is_use').is(':checked')){
                                                var is_use =1;
                                            }
                                            $.ajax({
                                                type:"post",
                                                url:"{:__URL('PLATFORM_MAIN/config/ethPayConfig')}",
                                                data:{
                                                    'is_use' : is_use
                                                },
                                                async:true,
                                                success:function (data) {
                                                    if (data["code"] > 0) {
                                                        util.message( data["message"],'success');
                                                    }else{
                                                        util.message( data["message"],'danger');
                                                    }
                                                }
                                            });
                                        }else{
                                            util.message('eth未完成配置','danger');
                                            return false;
                                        }
                                    }
                                })
                            })
                        })
                    }else{
                        if($('.form-validate7').find('#ethpay_is_use').is(':checked')){
                            var is_use =1;
                        }
                        $.ajax({
                            type:"post",
                            url:"{:__URL('PLATFORM_MAIN/config/ethPayConfig')}",
                            data:{
                                'is_use' : is_use
                            },
                            async:true,
                            success:function (data) {
                                if (data["code"] > 0) {
                                    util.message( data["message"],'success');
                                }else{
                                    util.message( data["message"],'danger');
                                }
                            }
                        });
                    }
                }
            })
        })
        //wap global支付
        util.validate($('.form-validate8'), function(form){
            if($('.form-validate8').find('#gppay_is_use').is(':checked')){
                var is_use =1;
            }
            var PARTNER_CODE = $("#PARTNER_CODE").val();
            var CREDENTIAL_CODE = $("#CREDENTIAL_CODE").val();
            var CURRENCY = $("input[name='CURRENCY']:checked").val();
            if(is_use){
                if(PARTNER_CODE==''){
                    util.message('请填写GlobePay[PARTNER_CODE]');
                    $('.form-validate8').find('#PARTNER_CODE').focus();
                    return false;
                }
                if(CREDENTIAL_CODE==''){
                    util.message('请填写GlobePay[CREDENTIAL_CODE]');
                    $('.form-validate8').find('#CREDENTIAL_CODE').focus();
                    return false;
                }
            }
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/glopayConfig')}",
                data:{
                    'partner_code':PARTNER_CODE,
                    'credential_code':CREDENTIAL_CODE,
                    'currency':CURRENCY,
                    'is_use' : is_use
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //wap 线下支付
        util.validate($('.form-validate21'),function(form){
            if($('.form-validate21').find('#offlinepay_is_use').is(':checked')){
                var is_use = 1;
            }else{
                var is_use = 0;
            }
            var pay_name = $('#pay_name').val();
            var collection_code = $('#collection_code').find('img').attr('src');
            var collection_memo = $('#collection_memo').val();
            if(is_use == 1) {
                if(pay_name == '') {
                    util.message('请填写支付方式名称');
                    $('.form-validate21').find('#pay_name').focus();
                    return false;
                }
                if(collection_code == undefined) {
                    util.message('请上传收款码');
                    return false;
                }
                if(collection_memo == '') {
                    util.message('请填写收款备注');
                    $('.form-validate21').find('#collection_memo').focus();
                    return false;
                }
            }
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/setOfflinePayConfig')}",
                data:{
                    'is_use' : is_use,'pay_name' : pay_name,'collection_code' : collection_code,'collection_memo' : collection_memo,'pay_type' : 1
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })

        //******* MP ********//
        //小程序的余额支付
        util.validate($('.form-validate9'), function(form){
            if($('.form-validate9').find('#bpay_is_use').is(':checked')){
                var is_use =1;
            }
            $.ajax({
                type:"post",
                url:"{$payBConfigMirUrl}",//$payBConfigUrl
                data:{
                    'is_use' : is_use
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })

        //小程序美丽分支付
        util.validate($('.form-validate99'), function(form){
            if($('.form-validate99').find('#ppay_is_use').is(':checked')){
                var is_use =1;
            }
            $.ajax({
                type:"post",
                url:"{$payPConfigMirUrl}",//$payBConfigUrl
                data:{
                    'is_use' : is_use
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //小程序端微信支付
        util.validate($('.form-validate10'), function(form){
            if($('.form-validate10').find('#dpay_is_use').is(':checked')){
                var is_use =1;
            }
            $.ajax({
                type:"post",
                url:"{$payDConfigMirUrl}",//$payDConfigUrl
                data:{
                    'is_use' : is_use
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success',loading('payment'));
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //小程序端微信支付
        util.validate($('.form-validate11'), function(form){
            if($('.form-validate11').find('#wxpay_is_use').is(':checked')){
                var is_use =1;
            }
            if($('.form-validate11').find('#wxtw_is_use').is(':checked')){
                var wx_tw =1;//微信提现开关
            }
            var appkey      = $("#APP_KEY").val();//AppID
            var MCHID       = $("#MCHID").val();//MCHID
            var paySignKey  = $("#paySignKey").val();//API秘钥
            var cert        = $(".cert").val();//cert证书
            var certkey     = $(".certkey").val();//cert证书
            if(is_use == 1){
                if(appkey==''){
                    util.message('请填写应用ID[AppID]');
                    $('.form-validate3').find('#appkey').focus();
                    return false;
                }
                if(paySignKey==''){
                    util.message('请填写API秘钥');
                    $('.form-validate3').find('#paySignKey').focus();
                    return false;
                }
                if(MCHID==''){
                    util.message('请填写微信支付商户号[MCHID]');
                    $('.form-validate3').find('#MCHID').focus();
                    return false;
                }
            }
            if(wx_tw ==1){
                if(cert==''){
                    util.message('请上传数字证书[pem]');
                    return false;
                }
                if(certkey==''){
                    util.message('请上传数字证书秘钥[pem]');
                    return false;
                }
            }
            $.ajax({
                type:"post",
                url:"{$payWxConfigMirUrl}",
                data:{
                    'appkey':appkey,
                    'MCHID':MCHID,
                    'paySignKey':paySignKey,
                    'is_use' : is_use,
                    'cert':cert,
                    'certkey':certkey,
                    'wx_tw':wx_tw
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //小程序端global支付
        util.validate($('.form-validate12'), function(form){
            if($('.form-validate12').find('#gppay_is_use').is(':checked')){
                var is_use =1;
            }
            var APPID = $("#APPID").val();
            var PARTNER_CODE = $("#PARTNER_CODE").val();
            var CREDENTIAL_CODE = $("#CREDENTIAL_CODE").val();
            var CURRENCY = $("input[name='CURRENCY']:checked").val();
            if(is_use){
                if(APPID==''){
                    util.message('请填写小程序Appid');
                    $('.form-validate12').find('#APPID').focus();
                    return false;
                }
                if(PARTNER_CODE==''){
                    util.message('请填写GlobePay[PARTNER_CODE]');
                    $('.form-validate12').find('#PARTNER_CODE').focus();
                    return false;
                }
                if(CREDENTIAL_CODE==''){
                    util.message('请填写GlobePay[CREDENTIAL_CODE]');
                    $('.form-validate12').find('#CREDENTIAL_CODE').focus();
                    return false;
                }
            }
            $.ajax({
                type:"post",
                url:"{$payGpConfigMirUrl}",
                data:{
                    'appid':APPID,
                    'partner_code':PARTNER_CODE,
                    'credential_code':CREDENTIAL_CODE,
                    'currency':CURRENCY,
                    'is_use' : is_use
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //小程序端通联
        util.validate($('.form-validate17'),function(form){
            if($('.form-validate17').find('#tlpay_is_use').is(':checked')){
                var is_use =1;
            }
            if($('.form-validate17').find('#tltw_is_use').is(':checked')){
                var tl_tw =1;
            }
            var tl_cusid = $("#tl_cusid").val();
            var tl_key = $("#tl_key").val();
            var tl_appid = $("#tl_appid").val();
            var tl_id = $("#tl_id").val();
            var tl_username = $("#tl_username").val();
            var tl_password = $("#tl_password").val();
            var tl_public = $(".tl_cert").val();
            var tl_private = $(".tl_certkey").val();
            if(is_use){
                if(tl_cusid==''){
                    util.message('请填写收银宝商户号');
                    $('.form-validate5').find('#ali_partnerid').focus();
                    return false;
                }
                if(tl_appid==''){
                    util.message('请填写收银宝APPID');
                    $('.form-validate5').find('#appid').focus();
                    return false;
                }
                if(tl_key==''){
                    util.message('请填写收款账户MD5密钥');
                    $('.form-validate5').find('#ali_key').focus();
                    return false;
                }
            }
            if(tl_tw){
                if(tl_id==''){
                    util.message('请填写通联通商户号');
                    $('.form-validate5').find('#tl_id').focus();
                    return false;
                }
                if(tl_username==''){
                    util.message('请填写用户名');
                    $('.form-validate5').find('#tl_username').focus();
                    return false;
                }
                if(tl_password==''){
                    util.message('请填写用户名密码');
                    $('.form-validate5').find('#tl_password').focus();
                    return false;
                }
                if(tl_public==''){
                    util.message('请上传数字证书');
                    $('.form-validate5').find('.tl_cert').focus();
                    return false;
                }
                if(tl_private==''){
                    util.message('请上传证书秘钥');
                    $('.form-validate5').find('.tl_certkey').focus();
                    return false;
                }
            }
            $.ajax({
                type:"post",
                url:"{$payTLConfigMirUrl}",
                data:{
                    'tl_cusid':tl_cusid,
                    'tl_key':tl_key,
                    'tl_appid':tl_appid,
                    'tl_id':tl_id,
                    'tl_username':tl_username,
                    'tl_password':tl_password,
                    'tl_public':tl_public,
                    'tl_private':tl_private,
                    'is_use':is_use,
                    'tl_tw':tl_tw
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        });
        //小程序端线下支付
        util.validate($('.form-validate22'),function(form){
            if($('.form-validate22').find('#offlinepay_is_use').is(':checked')){
                var is_use = 1;
            }else{
                var is_use = 0;
            }
            var pay_name = $('#pay_name').val();
            var collection_code = $('#collection_code').find('img').attr('src');
            var collection_memo = $('#collection_memo').val();
            if(is_use == 1) {
                if(pay_name == '') {
                    util.message('请填写支付方式名称');
                    $('.form-validate22').find('#pay_name').focus();
                    return false;
                }
                if(collection_code == undefined) {
                    util.message('请上传收款码');
                    return false;
                }
                if(collection_memo == '') {
                    util.message('请填写收款备注');
                    $('.form-validate22').find('#collection_memo').focus();
                    return false;
                }
            }
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/setOfflinePayConfig')}",
                data:{
                    'is_use' : is_use,'pay_name' : pay_name,'collection_code' : collection_code,'collection_memo' : collection_memo,'pay_type' : 2
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //******* APP ********//
        //app端余额支付
        util.validate($('.form-validate13'), function(form){
            if($('.form-validate13').find('#bpay_is_use').is(':checked')){
                var is_use =1;
            }
            $.ajax({
                type:"post",
                url:"{$payBConfigUrl}",
                data:{
                    'is_use' : is_use
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //app端货到付款
        util.validate($('.form-validate14'), function(form){
            if($('.form-validate14').find('#dpay_is_use').is(':checked')){
                var is_use =1;
            }
            $.ajax({
                type:"post",
                url:"{$payDConfigUrl}",
                data:{
                    'is_use' : is_use
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //app端微信支付
        util.validate($('.form-validate15'), function(form){
            if($('.form-validate15').find('#wxpay_is_use').is(':checked')){
                var is_use =1;
            }
            if($('.form-validate15').find('#wxtw_is_use').is(':checked')){
                var wx_tw =1;//微信提现开关
            }
            var appkey = $("#APP_KEY").val();//AppID
            var MCHID = $("#MCHID").val();//MCHID
            var paySignKey = $("#paySignKey").val();//API秘钥
            var cert = $(".cert").val();//cert证书
            var certkey = $(".certkey").val();//cert证书
            if(is_use == 1){
                if(appkey==''){
                    util.message('请填写应用ID[AppID]');
                    $('.form-validate3').find('#appkey').focus();
                    return false;
                }
                if(paySignKey==''){
                    util.message('请填写API秘钥');
                    $('.form-validate3').find('#paySignKey').focus();
                    return false;
                }
                if(MCHID==''){
                    util.message('请填写微信支付商户号[MCHID]');
                    $('.form-validate3').find('#MCHID').focus();
                    return false;
                }
            }
            if(wx_tw ==1){
                if(cert==''){
                    util.message('请上传数字证书[pem]');
                    return false;
                }
                if(certkey==''){
                    util.message('请上传数字证书秘钥[pem]');
                    return false;
                }
            }
            $.ajax({
                type:"post",
                url:"{$payWxConfigUrl}",
                data:{
                    'appkey':appkey,
                    'MCHID':MCHID,
                    'paySignKey':paySignKey,
                    'is_use' : is_use,
                    'cert':cert,
                    'certkey':certkey,
                    'wx_tw':wx_tw
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //app端支付宝支付
        util.validate($('.form-validate16'), function(form){
            if($('.form-validate16').find('#alipay_is_use').is(':checked')){
                var is_use =1;
            }
            var ali_partnerid = $("#ali_partnerid").val();
            var ali_seller = $("#ali_seller").val();
            var ali_key = $("#ali_key").val();
            var appid = $("#ali_appid").val();
            var ali_public_key = $("#ali_public_key").val();
            var ali_private_key = $("#ali_private_key").val();
            var ali_cert_sn = $(".appCertPublicKey").val();
            var ali_public_key_cert = $(".alipayCertPublicKey").val();
            var ali_root_cert_sn = $(".alipayRootCert").val();
            if(is_use){
                if(ali_partnerid==''){
                    util.message('请填写合作者身份ID');
                    $('.form-validate16').find('#ali_partnerid').focus();
                    return false;
                }
                if(ali_seller==''){
                    util.message('请填写支付宝账号');
                    $('.form-validate16').find('#ali_seller').focus();
                    return false;
                }
                if(ali_key==''){
                    util.message('请填写安全校验码');
                    $('.form-validate16').find('#ali_key').focus();
                    return false;
                }
                if(appid==''){
                    util.message('请填写APPID');
                    $('.form-validate16').find('#ali_wap_appid').focus();
                    return false;
                }
                if(ali_public_key==''){
                    util.message('请填写支付宝公钥');
                    $('.form-validate16').find('#ali_public_key').focus();
                    return false;
                }
                if(ali_private_key==''){
                    util.message('请填写商户私钥');
                    $('.form-validate16').find('#ali_private_key').focus();
                    return false;
                }
                if(ali_cert_type ==1){
                    if(ali_cert_sn==''){
                        util.message('请上传appCertPublicKey证书');
                        return false;
                    }
                    if(ali_public_key_cert==''){
                        util.message('请上传alipayCertPublicKey证书');
                        return false;
                    }
                    if(ali_root_cert_sn==''){
                        util.message('请上传alipayRootCert证书');
                        return false;
                    }
                }
            }
            $.ajax({
                type:"post",
                url:"{$payAliConfigUrl}",
                data:{
                    'ali_partnerid':ali_partnerid,
                    'ali_seller':ali_seller,
                    'ali_key':ali_key,
                    'appid':appid,
                    'ali_public_key':ali_public_key,
                    'ali_private_key':ali_private_key,
                    'is_use':is_use,
                    'ali_cert_sn':ali_cert_sn,
                    'ali_public_key_cert':ali_public_key_cert,
                    'ali_root_cert_sn':ali_root_cert_sn
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //app端通联
        util.validate($('.form-validate18'),function(form){
            if($('.form-validate18').find('#tlpay_is_use').is(':checked')){
                var is_use =1;
            }
            if($('.form-validate18').find('#tltw_is_use').is(':checked')){
                var tl_tw =1;
            }
            var tl_cusid = $("#tl_cusid").val();
            var tl_key = $("#tl_key").val();
            var tl_appid = $("#tl_appid").val();
            var tl_id = $("#tl_id").val();
            var tl_username = $("#tl_username").val();
            var tl_password = $("#tl_password").val();
            var tl_public = $(".tl_cert").val();
            var tl_private = $(".tl_certkey").val();
            if(is_use){
                if(tl_cusid==''){
                    util.message('请填写收银宝商户号');
                    $('.form-validate5').find('#ali_partnerid').focus();
                    return false;
                }
                if(tl_appid==''){
                    util.message('请填写收银宝APPID');
                    $('.form-validate5').find('#appid').focus();
                    return false;
                }
                if(tl_key==''){
                    util.message('请填写收款账户MD5密钥');
                    $('.form-validate5').find('#ali_key').focus();
                    return false;
                }
            }
            if(tl_tw){
                if(tl_id==''){
                    util.message('请填写通联通商户号');
                    $('.form-validate5').find('#tl_id').focus();
                    return false;
                }
                if(tl_username==''){
                    util.message('请填写用户名');
                    $('.form-validate5').find('#tl_username').focus();
                    return false;
                }
                if(tl_password==''){
                    util.message('请填写用户名密码');
                    $('.form-validate5').find('#tl_password').focus();
                    return false;
                }
                if(tl_public==''){
                    util.message('请上传数字证书');
                    $('.form-validate5').find('.tl_cert').focus();
                    return false;
                }
                if(tl_private==''){
                    util.message('请上传证书秘钥');
                    $('.form-validate5').find('.tl_certkey').focus();
                    return false;
                }
            }
            $.ajax({
                type:"post",
                url:"{$payTLConfigUrl}",
                data:{
                    'tl_cusid':tl_cusid,
                    'tl_key':tl_key,
                    'tl_appid':tl_appid,
                    'tl_id':tl_id,
                    'tl_username':tl_username,
                    'tl_password':tl_password,
                    'tl_public':tl_public,
                    'tl_private':tl_private,
                    'is_use':is_use,
                    'tl_tw':tl_tw
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        });
        //app端eos付款配置
        util.validate($('.form-validate19'),function(form){
            $.ajax({
                'url':"{:__URL('PLATFORM_MAIN/system/getCoinConfig')}",
                'type':'post',
                'data':{},
                success:function(data){
                    if(data.eos_status == 0){
                        util.alert('商城还没有配置eos钱包，请先配置。', function () {
                            window.open("{:__URL('ADDONS_MAINblockChainBasicSetting')}");
                            util.alert('是否已配置完成？', function(){
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/system/getCoinConfig')}",
                                    'type':'post',
                                    'data':{},
                                    success:function(data){
                                        if(data.eos_status == 1){
                                            if($('.form-validate19').find('#eospay_is_use').is(':checked')){
                                                var is_use =1;
                                            }
                                            $.ajax({
                                                type:"post",
                                                url:"{$eosPayConfigUrl}",
                                                data:{
                                                    'is_use' : is_use
                                                },
                                                async:true,
                                                success:function (data) {
                                                    if (data["code"] > 0) {
                                                        util.message( data["message"],'success');
                                                    }else{
                                                        util.message( data["message"],'danger');
                                                    }
                                                }
                                            });
                                        }else{
                                            util.message('eos未完成配置','danger');
                                            return false;
                                        }
                                    }
                                })
                            })
                        })
                    }else{
                        if($('.form-validate19').find('#eospay_is_use').is(':checked')){
                            var is_use =1;
                        }
                        $.ajax({
                            type:"post",
                            url:"{$eosPayConfigUrl}",
                            data:{
                                'is_use' : is_use
                            },
                            async:true,
                            success:function (data) {
                                if (data["code"] > 0) {
                                    util.message( data["message"],'success');
                                }else{
                                    util.message( data["message"],'danger');
                                }
                            }
                        });
                    }
                }
            })
        })
        //app端eth付款配置
        util.validate($('.form-validate20'),function(form){
            $.ajax({
                'url':"{:__URL('PLATFORM_MAIN/system/getCoinConfig')}",
                'type':'post',
                'data':{},
                success:function(data){
                    if(data.eth_status == 0){
                        util.alert('商城还没有配置eth钱包，请先配置。', function () {
                            window.open("{:__URL('ADDONS_MAINblockChainBasicSetting')}");
                            util.alert('是否已配置完成？', function(){
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/system/getCoinConfig')}",
                                    'type':'post',
                                    'data':{},
                                    success:function(data){
                                        if(data.eth_status == 1){
                                            if($('.form-validate20').find('#ethpay_is_use').is(':checked')){
                                                var is_use =1;
                                            }
                                            $.ajax({
                                                type:"post",
                                                url:"{$ethPayConfigUrl}",
                                                data:{
                                                    'is_use' : is_use
                                                },
                                                async:true,
                                                success:function (data) {
                                                    if (data["code"] > 0) {
                                                        util.message( data["message"],'success');
                                                    }else{
                                                        util.message( data["message"],'danger');
                                                    }
                                                }
                                            });
                                        }else{
                                            util.message('eth未完成配置','danger');
                                            return false;
                                        }
                                    }
                                })
                            })
                        })
                    }else{
                        if($('.form-validate20').find('#ethpay_is_use').is(':checked')){
                            var is_use =1;
                        }
                        $.ajax({
                            type:"post",
                            url:"{$ethPayConfigUrl}",
                            data:{
                                'is_use' : is_use
                            },
                            async:true,
                            success:function (data) {
                                if (data["code"] > 0) {
                                    util.message( data["message"],'success');
                                }else{
                                    util.message( data["message"],'danger');
                                }
                            }
                        });
                    }
                }
            })
        })
        //APP端线下支付
        util.validate($('.form-validate23'),function(form){
            if($('.form-validate23').find('#offlinepay_is_use').is(':checked')){
                var is_use = 1;
            }else{
                var is_use = 0;
            }
            var pay_name = $('#pay_name').val();
            var collection_code = $('#collection_code').find('img').attr('src');
            var collection_memo = $('#collection_memo').val();
            if(is_use == 1) {
                if(pay_name == '') {
                    util.message('请填写支付方式名称');
                    $('.form-validate23').find('#pay_name').focus();
                    return false;
                }
                if(collection_code == undefined) {
                    util.message('请上传收款码');
                    return false;
                }
                if(collection_memo == '') {
                    util.message('请填写收款备注');
                    $('.form-validate23').find('#collection_memo').focus();
                    return false;
                }
            }
            $.ajax({
                type:"post",
                url:"{:__URL('PLATFORM_MAIN/config/setOfflinePayConfig')}",
                data:{
                    'is_use' : is_use,'pay_name' : pay_name,'collection_code' : collection_code,'collection_memo' : collection_memo,'pay_type' : 3
                },
                async:true,
                success:function (data) {
                    if (data["code"] > 0) {
                        util.message( data["message"],'success');
                    }else{
                        util.message( data["message"],'danger');
                    }
                }
            });
        })
        //生成秘钥
        $('body').on('click','.J-key',function(){
            var letters = 'abcdefghijklmnopqrstuvwxyz0123456789';
            var token = '';
            for(var i = 0; i < 32; i++) {
                var j = parseInt(Math.random() * (31 + 1));
                token += letters[j];
            }
            $('#MCH_KEY').val(token);
        })
        //检测微信配置信息
        $('body').on('click', '#wxpay_is_use', function () {
            
            if($(this).is(':checked')){
                //该处检测是否与汇聚的微信配置冲突 应只能开启一方
                var check_type = $(this).data('type');//wap mp app
                checkPayStatus('JOINPAY','WPAY','wxpay_is_use',check_type);
                $('.J-wxpay').show();
            }else{
                $('.J-wxpay').hide();
            }
            
            if($(this).is(':checked')){
                var type = $(this).data('type');//wap mp app
                var wx_wap = $("#wx_wap_mch_id").val();
                var wx_mp = $("#wx_mp_mch_id").val();
                var wx_app = $("#wx_app_mch_id").val();
                //wap
                if ((type == 'wap')) {
                    if (wx_mp && wx_app) {
                        util.alertTwo('检测到商城已存在配置,如果配置信息与其一致，可直接同步相应配置信息',
                            '同步小程序端',function () {
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/Config/synWXPayConfig')}",
                                    'data':{type:'mp','target_type': type},
                                    'type':'post',
                                    success:function(data){
                                        if(data.data) {
                                            $("#APP_KEY").val(data.data['appid']);
                                            $("#MCHID").val(data.data['mch_id']);
                                            $("#paySignKey").val(data.data['mch_key']);
                                            var is_open = data.data['wx_tw'] == 0? false: true;
                                            $("#wxtw_is_use").prop("checked", is_open);
                                            $(".cert").val(data.data['cert']);
                                            $(".certkey").val(data.data['certkey']);
                                            if (is_open == 1){
                                                $('.J-wxtw').show();
                                            }
                                        }
                                    }
                                });
                            },
                            '同步APP端',function () {
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/Config/synWXPayConfig')}",
                                    'data':{type:'app','target_type': type},
                                    'type':'post',
                                    success:function(data){
                                        if(data.data) {
                                            $("#APP_KEY").val(data.data['appid']);
                                            $("#MCHID").val(data.data['mch_id']);
                                            $("#paySignKey").val(data.data['mch_key']);
                                            var is_open = data.data['wx_tw'] == 0? false: true;
                                            $("#wxtw_is_use").prop("checked", is_open);
                                            $(".cert").val(data.data['cert']);
                                            $(".certkey").val(data.data['certkey']);
                                            if (is_open == 1){
                                                $('.J-wxtw').show();
                                            }
                                        }
                                    }
                                });
                            }
                        )
                    }else if(wx_mp){
                        util.alert('检测到商城已配置商户号为：'+wx_mp+'的微信支付信息，如小程序微信支付商户号与其一致，可直接同步配置信息。', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synWXPayConfig')}",
                                'data':{type:'mp','target_type': type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#APP_KEY").val(data.data['appid']);
                                        $("#MCHID").val(data.data['mch_id']);
                                        $("#paySignKey").val(data.data['mch_key']);
                                        var is_open = data.data['wx_tw'] == 0? false: true;
                                        $("#wxtw_is_use").prop("checked", is_open);
                                        $(".cert").val(data.data['cert']);
                                        $(".certkey").val(data.data['certkey']);
                                        if (is_open == 1){
                                            $('.J-wxtw').show();
                                        }
                                    }
                                }
                            });
                        });
                    }else if(wx_app){
                        util.alert('检测到商城已配置商户号为：'+wx_app+'的微信支付信息，如APP端微信支付商户号与其一致，可直接同步配置信息。', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synWXPayConfig')}",
                                'data':{type:'app','target_type': type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#APP_KEY").val(data.data['appid']);
                                        $("#MCHID").val(data.data['mch_id']);
                                        $("#paySignKey").val(data.data['mch_key']);
                                        var is_open = data.data['wx_tw'] == 0? false: true;
                                        $("#wxtw_is_use").prop("checked", is_open);
                                        $(".cert").val(data.data['cert']);
                                        $(".certkey").val(data.data['certkey']);
                                        if (is_open == 1){
                                            $('.J-wxtw').show();
                                        }
                                    }
                                }
                            });
                        });
                    }
                }
                //mp
                if ((type == 'mp')) {
                    if (wx_wap && wx_app) {
                        util.alertTwo('检测到商城已存在配置,如果配置信息与其一致，可直接同步相应配置信息',
                            '同步网页端',function () {
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/Config/synWXPayConfig')}",
                                    'data':{type:'wap','target_type': type},
                                    'type':'post',
                                    success:function(data){
                                        if(data.data) {
                                            $("#APP_KEY").val(data.data['appid']);
                                            $("#MCHID").val(data.data['mch_id']);
                                            $("#paySignKey").val(data.data['mch_key']);
                                            var is_open = data.data['wx_tw'] == 0? false: true;
                                            $("#wxtw_is_use").prop("checked", is_open);
                                            $(".cert").val(data.data['cert']);
                                            $(".certkey").val(data.data['certkey']);
                                            if (is_open == 1){
                                                $('.J-wxtw').show();
                                            }
                                        }
                                    }
                                });
                            },
                            '同步APP端',function () {
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/Config/synWXPayConfig')}",
                                    'data':{type:'app','target_type': type},
                                    'type':'post',
                                    success:function(data){
                                        if(data.data) {
                                            $("#APP_KEY").val(data.data['appid']);
                                            $("#MCHID").val(data.data['mch_id']);
                                            $("#paySignKey").val(data.data['mch_key']);
                                            var is_open = data.data['wx_tw'] == 0? false: true;
                                            $("#wxtw_is_use").prop("checked", is_open);
                                            $(".cert").val(data.data['cert']);
                                            $(".certkey").val(data.data['certkey']);
                                            if (is_open == 1){
                                                $('.J-wxtw').show();
                                            }
                                        }
                                    }
                                });
                            }
                        )
                    }else if(wx_wap){
                        util.alert('检测到商城已配置商户号为：'+wx_wap+'的微信支付信息，如网页端微信支付商户号与其一致，可直接同步配置信息。', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synWXPayConfig')}",
                                'data':{type:'wap','target_type': type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#APP_KEY").val(data.data['appid']);
                                        $("#MCHID").val(data.data['mch_id']);
                                        $("#paySignKey").val(data.data['mch_key']);
                                        var is_open = data.data['wx_tw'] == 0? false: true;
                                        $("#wxtw_is_use").prop("checked", is_open);
                                        $(".cert").val(data.data['cert']);
                                        $(".certkey").val(data.data['certkey']);
                                        if (is_open == 1){
                                            $('.J-wxtw').show();
                                        }
                                    }
                                }
                            });
                        });
                    }else if(wx_app){
                        util.alert('检测到商城已配置商户号为：'+wx_app+'的微信支付信息，如APP端微信支付商户号与其一致，可直接同步配置信息。', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synWXPayConfig')}",
                                'data':{type:'app','target_type': type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#APP_KEY").val(data.data['appid']);
                                        $("#MCHID").val(data.data['mch_id']);
                                        $("#paySignKey").val(data.data['mch_key']);
                                        var is_open = data.data['wx_tw'] == 0? false: true;
                                        $("#wxtw_is_use").prop("checked", is_open);
                                        $(".cert").val(data.data['cert']);
                                        $(".certkey").val(data.data['certkey']);
                                        if (is_open == 1){
                                            $('.J-wxtw').show();
                                        }
                                    }
                                }
                            });
                        });
                    }
                }
                //app
                if ((type == 'app')) {
                    if (wx_wap && wx_mp) {
                        util.alertTwo('检测到商城已存在配置,如果配置信息与其一致，可直接同步相应配置信息',
                            '同步网页端',function () {
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/Config/synWXPayConfig')}",
                                    'data':{type:'wap','target_type': type},
                                    'type':'post',
                                    success:function(data){
                                        if(data.data) {
                                            $("#APP_KEY").val(data.data['appid']);
                                            $("#MCHID").val(data.data['mch_id']);
                                            $("#paySignKey").val(data.data['mch_key']);
                                            var is_open = data.data['wx_tw'] == 0? false: true;
                                            $("#wxtw_is_use").prop("checked", is_open);
                                            $(".cert").val(data.data['cert']);
                                            $(".certkey").val(data.data['certkey']);
                                            if (is_open == 1){
                                                $('.J-wxtw').show();
                                            }
                                        }
                                    }
                                });
                            },
                            '同步小程序端',function () {
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/Config/synWXPayConfig')}",
                                    'data':{type:'mp','target_type': type},
                                    'type':'post',
                                    success:function(data){
                                        if(data.data) {
                                            $("#APP_KEY").val(data.data['appid']);
                                            $("#MCHID").val(data.data['mch_id']);
                                            $("#paySignKey").val(data.data['mch_key']);
                                            var is_open = data.data['wx_tw'] == 0? false: true;
                                            $("#wxtw_is_use").prop("checked", is_open);
                                            $(".cert").val(data.data['cert']);
                                            $(".certkey").val(data.data['certkey']);
                                            if (is_open == 1){
                                                $('.J-wxtw').show();
                                            }
                                        }
                                    }
                                });
                            }
                        )
                    }else if(wx_wap){
                        util.alert('检测到商城已配置商户号为：'+wx_wap+'的微信支付信息，如网页端微信支付商户号与其一致，可直接同步配置信息。', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synWXPayConfig')}",
                                'data':{type:'wap','target_type': type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#APP_KEY").val(data.data['appid']);
                                        $("#MCHID").val(data.data['mch_id']);
                                        $("#paySignKey").val(data.data['mch_key']);
                                        var is_open = data.data['wx_tw'] == 0? false: true;
                                        $("#wxtw_is_use").prop("checked", is_open);
                                        $(".cert").val(data.data['cert']);
                                        $(".certkey").val(data.data['certkey']);
                                        if (is_open == 1){
                                            $('.J-wxtw').show();
                                        }
                                    }
                                }
                            });
                        });
                    }else if(wx_mp){
                        util.alert('检测到商城已配置商户号为：'+wx_mp+'的微信支付信息，如小程序端微信支付商户号与其一致，可直接同步配置信息。', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synWXPayConfig')}",
                                'data':{type:'mp','target_type': type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#APP_KEY").val(data.data['appid']);
                                        $("#MCHID").val(data.data['mch_id']);
                                        $("#paySignKey").val(data.data['mch_key']);
                                        var is_open = data.data['wx_tw'] == 0? false: true;
                                        $("#wxtw_is_use").prop("checked", is_open);
                                        $(".cert").val(data.data['cert']);
                                        $(".certkey").val(data.data['certkey']);
                                        if (is_open == 1){
                                            $('.J-wxtw').show();
                                        }
                                    }
                                }
                            });
                        });
                    }
                }
            }
        });
        //检测globapay配置信息
        $('body').on('click', '#gppay_is_use', function () {
            if($(this).is(':checked')){
                var type = $(this).data('type');//wap mp
                var glp_wap = $("#glp_wap").val();
                var glp_mp = $("#glp_mp").val();

                if ((type == 'wap')) {
                    if (glp_mp) {
                        util.alert('是否使用商城小程序配置的Appid', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synGlobePayConfig')}",
                                'data':{type:'mp','target_type':type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#PARTNER_CODE").val(data.data['partner_code']);
                                        $("#CREDENTIAL_CODE").val(data.data['credential_code']);
                                        if(data.data['currency'] == 'CNY'){
                                            $("input[name='CURRENCY']:eq(1)").attr("checked",'checked');
                                        }else{
                                            $("input[name='CURRENCY']:eq(0)").attr("checked",'checked');
                                        }
                                    }
                                }
                            });
                        });
                    }
                }else if ((type == 'mp')){
                    if (glp_wap) {
                        util.alert('是否使用商城网页端配置的Appid', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synGlobePayConfig')}",
                                'data':{type:'wap','target_type':type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#PARTNER_CODE").val(data.data['partner_code']);
                                        $("#CREDENTIAL_CODE").val(data.data['credential_code']);
                                        if(data.data['currency'] == 'CNY'){
                                            $("input[name='CURRENCY']:eq(1)").attr("checked",'checked');
                                        }else{
                                            $("input[name='CURRENCY']:eq(0)").attr("checked",'checked');
                                        }
                                    }
                                }
                            });
                        });
                    }
                }
            }
        });
        //检测支付宝配置信息
        $('body').on('click', '#alipay_is_use', function () {
            if($(this).is(':checked')){
                //该处检测是否与汇聚的微信配置冲突 应只能开启一方
                var check_type = $(this).data('type');//wap mp app
                checkPayStatus('JOINPAY','ALIPAY','alipay_is_use',check_type);
                $('.J-alipay').show();
            }else{
                $('.J-alipay').hide();
            }
            if($(this).is(':checked')){
                var type = $(this).data('type');//wap app
                var ali_wap = $("#ali_wap").val();
                var ali_app = $("#ali_app").val();
                if((type == 'wap')) {
                    if (ali_app) {
                        util.alert('是否使用商城APP端的支付宝配置', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synAliPayConfig')}",
                                'data':{type:'app','target_type':type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        if(data.data) {
                                            $("#appid").val(data.data['appid']);
                                            $("#ali_partnerid").val(data.data['ali_partnerid']);
                                            $("#ali_seller").val(data.data['ali_seller']);
                                            $("#ali_key").val(data.data['ali_key']);
                                            $("#ali_public_key").val(data.data['ali_public_key']);
                                            $("#ali_private_key").val(data.data['ali_private_key']);
                                            var is_open = data.data['ali_cert_type'] == 0? false: true;
                                            $("#ali_cert_type").prop("checked", is_open);
                                            //证书
                                            $(".appCertPublicKey").val(data.data['ali_cert_sn']);
                                            $(".alipayCertPublicKey").val(data.data['ali_public_key_cert']);
                                            $(".alipayRootCert").val(data.data['ali_root_cert_sn']);
                                            if (is_open==1){
                                                $(".J-cert").show();
                                                $(".J-notcert").hide()
                                            }else{
                                                $(".J-cert").hide();
                                                $(".J-notcert").show()
                                            }
                                        }
                                    }
                                }
                            });
                        });
                    }
                }else if ((type == 'app')) {
                    if (ali_wap) {
                        util.alert('是否使用商城网页端配置的支付宝配置', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synAliPayConfig')}",
                                'data':{type:'wap','target_type':type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#appid").val(data.data['appid']);
                                        $("#ali_partnerid").val(data.data['ali_partnerid']);
                                        $("#ali_seller").val(data.data['ali_seller']);
                                        $("#ali_key").val(data.data['ali_key']);
                                        $("#ali_public_key").val(data.data['ali_public_key']);
                                        $("#ali_private_key").val(data.data['ali_private_key']);
                                        var is_open = data.data['ali_cert_type'] == 0? false: true;
                                        $("#ali_cert_type").prop("checked", is_open);
                                        //证书
                                        $(".appCertPublicKey").val(data.data['ali_cert_sn']);
                                        $(".alipayCertPublicKey").val(data.data['ali_public_key_cert']);
                                        $(".alipayRootCert").val(data.data['ali_root_cert_sn']);
                                        if (is_open == 1){
                                            $(".J-cert").show();
                                            $(".J-notcert").hide()
                                        }else{
                                            $(".J-cert").hide();
                                            $(".J-notcert").show()
                                        }
                                    }
                                }
                            });
                        });
                    }
                }
            }
        });
        //检测通联配置信息
        $('body').on('click', '#tlpay_is_use', function () {
            if($(this).is(':checked')){
                //该处检测是否与���聚的微信配置冲突 应只能开启一方
                var check_type = $(this).data('type');//wap mp app
                checkPayStatus('JOINPAY','TLPAY','tlpay_is_use',check_type);
                $('.J-tlpay').show();
                // $('#tltw_is_use').click();
            }else{
                $('.J-tlpay').hide();
                // $('#tltw_is_use').click();
            }
            if($(this).is(':checked')){
                var type = $(this).data('type');//wap mp app
                var tl_wap = $("#tl_wap").val();
                var tl_mp = $("#tl_mp").val();
                var tl_app = $("#tl_app").val();
                //wap
                if ((type == 'wap')) {
                    if (tl_mp && tl_app) {
                        util.alertTwo('检测到商城已存在配置,如果配置信息与其一致，可直接同步相应配置信息',
                            '同步小程序端',function () {
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/Config/synTLPayConfig')}",
                                    'data':{type:'mp','target_type':type},
                                    'type':'post',
                                    success:function(data){
                                        if(data.data) {
                                            $("#tl_cusid").val(data.data['tl_cusid']);
                                            $("#tl_key").val(data.data['tl_key']);
                                            $("#tl_appid").val(data.data['tl_appid']);
                                            $("#tl_username").val(data.data['tl_username']);
                                            $("#tl_id").val(data.data['tl_id']);
                                            $("#tl_password").val(data.data['tl_password']);
                                            var is_open = data.data['ali_cert_type'] == 0? false: true;
                                            $("#ali_cert_type").prop("checked", is_open);
                                            var tl_tw = data.data['tl_tw'] ? true : false;
                                            $("#tltw_is_use").prop("checked", tl_tw);
                                            $(".tl_cert").val(data.data['tl_public']);
                                            $(".tl_certkey").val(data.data['tl_private']);
                                            if (tl_tw){
                                                $(".J-tltw").show();
                                            }else{
                                                $(".J-tltw").hide();
                                            }
                                        }
                                    }
                                });
                            },
                            '同步APP端',function () {
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/Config/synTLPayConfig')}",
                                    'data':{type:'app','target_type':type},
                                    'type':'post',
                                    success:function(data){
                                        if(data.data) {
                                            $("#tl_cusid").val(data.data['tl_cusid']);
                                            $("#tl_key").val(data.data['tl_key']);
                                            $("#tl_appid").val(data.data['tl_appid']);
                                            $("#tl_username").val(data.data['tl_username']);
                                            $("#tl_id").val(data.data['tl_id']);
                                            $("#tl_password").val(data.data['tl_password']);
                                            var is_open = data.data['ali_cert_type'] == 0? false: true;
                                            $("#ali_cert_type").prop("checked", is_open);
                                            var tl_tw = data.data['tl_tw'] ? true : false;
                                            $("#tltw_is_use").prop("checked", tl_tw);
                                            $(".tl_cert").val(data.data['tl_public']);
                                            $(".tl_certkey").val(data.data['tl_private']);
                                            if (tl_tw){
                                                $(".J-tltw").show();
                                            }else{
                                                $(".J-tltw").hide();
                                            }
                                        }
                                    }
                                });
                            }
                        )
                    }else if(tl_mp){
                        util.alert('检测到商城已配置商户号为：'+tl_mp+'的通联信息，如小程序通联商户号与其一致，可直接同步配置信息。', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synTLPayConfig')}",
                                'data':{type:'mp','target_type':type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#tl_cusid").val(data.data['tl_cusid']);
                                        $("#tl_key").val(data.data['tl_key']);
                                        $("#tl_appid").val(data.data['tl_appid']);
                                        $("#tl_username").val(data.data['tl_username']);
                                        $("#tl_id").val(data.data['tl_id']);
                                        $("#tl_password").val(data.data['tl_password']);
                                        var is_open = data.data['ali_cert_type'] == 0? false: true;
                                        $("#ali_cert_type").prop("checked", is_open);
                                        var tl_tw = data.data['tl_tw'] ? true : false;
                                        $("#tltw_is_use").prop("checked", tl_tw);
                                        $(".tl_cert").val(data.data['tl_public']);
                                        $(".tl_certkey").val(data.data['tl_private']);
                                        if (tl_tw){
                                            $(".J-tltw").show();
                                        }else{
                                            $(".J-tltw").hide();
                                        }
                                    }
                                }
                            });
                        });
                    }else if(tl_app){
                        util.alert('检测到商城已配置商户号为：'+tl_app+'的通联信息，如APP端通联商户号与其一致，可直接同步配置信息。', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synTLPayConfig')}",
                                'data':{type:'app','target_type':type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#tl_cusid").val(data.data['tl_cusid']);
                                        $("#tl_key").val(data.data['tl_key']);
                                        $("#tl_appid").val(data.data['tl_appid']);
                                        $("#tl_username").val(data.data['tl_username']);
                                        $("#tl_id").val(data.data['tl_id']);
                                        $("#tl_password").val(data.data['tl_password']);
                                        var is_open = data.data['ali_cert_type'] == 0? false: true;
                                        $("#ali_cert_type").prop("checked", is_open);
                                        var tl_tw = data.data['tl_tw'] ? true : false;
                                        $("#tltw_is_use").prop("checked", tl_tw);
                                        $(".tl_cert").val(data.data['tl_public']);
                                        $(".tl_certkey").val(data.data['tl_private']);
                                        if (tl_tw){
                                            $(".J-tltw").show();
                                        }else{
                                            $(".J-tltw").hide();
                                        }
                                    }
                                }
                            });
                        });
                    }
                }
                //mp
                if ((type == 'mp')) {
                    if (tl_wap && tl_app) {
                        util.alertTwo('检测到商城已存在配置,如果配置信息与其一致，可直接同步相应配置信息',
                            '同步网页端',function () {
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/Config/synTLPayConfig')}",
                                    'data':{type:'wap','target_type':type},
                                    'type':'post',
                                    success:function(data){
                                        if(data.data) {
                                            $("#tl_cusid").val(data.data['tl_cusid']);
                                            $("#tl_key").val(data.data['tl_key']);
                                            $("#tl_appid").val(data.data['tl_appid']);
                                            $("#tl_username").val(data.data['tl_username']);
                                            $("#tl_id").val(data.data['tl_id']);
                                            $("#tl_password").val(data.data['tl_password']);
                                            var is_open = data.data['ali_cert_type'] == 0? false: true;
                                            $("#ali_cert_type").prop("checked", is_open);
                                            var tl_tw = data.data['tl_tw'] ? true : false;
                                            $("#tltw_is_use").prop("checked", tl_tw);
                                            $(".tl_cert").val(data.data['tl_public']);
                                            $(".tl_certkey").val(data.data['tl_private']);
                                            if (tl_tw){
                                                $(".J-tltw").show();
                                            }else{
                                                $(".J-tltw").hide();
                                            }
                                        }
                                    }
                                });
                            },
                            '同步APP端',function () {
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/Config/synTLPayConfig')}",
                                    'data':{type:'app','target_type':type},
                                    'type':'post',
                                    success:function(data){
                                        if(data.data) {
                                            $("#tl_cusid").val(data.data['tl_cusid']);
                                            $("#tl_key").val(data.data['tl_key']);
                                            $("#tl_appid").val(data.data['tl_appid']);
                                            $("#tl_username").val(data.data['tl_username']);
                                            $("#tl_id").val(data.data['tl_id']);
                                            $("#tl_password").val(data.data['tl_password']);
                                            var is_open = data.data['ali_cert_type'] == 0? false: true;
                                            $("#ali_cert_type").prop("checked", is_open);
                                            var tl_tw = data.data['tl_tw'] ? true : false;
                                            $("#tltw_is_use").prop("checked", tl_tw);
                                            $(".tl_cert").val(data.data['tl_public']);
                                            $(".tl_certkey").val(data.data['tl_private']);
                                            if (tl_tw){
                                                $(".J-tltw").show();
                                            }else{
                                                $(".J-tltw").hide();
                                            }
                                        }
                                    }
                                });
                            }
                        )
                    }else if(tl_wap){
                        util.alert('检测到商城已配置商户号为：'+tl_wap+'的通联信息，如WAP端通联商户号与其一致，可直接同步配置信息。', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synTLPayConfig')}",
                                'data':{type:'wap','target_type':type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#tl_cusid").val(data.data['tl_cusid']);
                                        $("#tl_key").val(data.data['tl_key']);
                                        $("#tl_appid").val(data.data['tl_appid']);
                                        $("#tl_username").val(data.data['tl_username']);
                                        $("#tl_id").val(data.data['tl_id']);
                                        $("#tl_password").val(data.data['tl_password']);
                                        var is_open = data.data['ali_cert_type'] == 0? false: true;
                                        $("#ali_cert_type").prop("checked", is_open);
                                        var tl_tw = data.data['tl_tw'] ? true : false;
                                        $("#tltw_is_use").prop("checked", tl_tw);
                                        $(".tl_cert").val(data.data['tl_public']);
                                        $(".tl_certkey").val(data.data['tl_private']);
                                        if (tl_tw){
                                            $(".J-tltw").show();
                                        }else{
                                            $(".J-tltw").hide();
                                        }
                                    }
                                }
                            });
                        });
                    }else if(tl_app){
                        util.alert('检测到商城已配置商户号为：'+tl_app+'的通联信息，如APP端通联商户号与其一致，可直接同步配置信息。', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synTLPayConfig')}",
                                'data':{type:'app','target_type':type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#tl_cusid").val(data.data['tl_cusid']);
                                        $("#tl_key").val(data.data['tl_key']);
                                        $("#tl_appid").val(data.data['tl_appid']);
                                        $("#tl_username").val(data.data['tl_username']);
                                        $("#tl_id").val(data.data['tl_id']);
                                        $("#tl_password").val(data.data['tl_password']);
                                        var is_open = data.data['ali_cert_type'] == 0? false: true;
                                        $("#ali_cert_type").prop("checked", is_open);
                                        var tl_tw = data.data['tl_tw'] ? true : false;
                                        $("#tltw_is_use").prop("checked", tl_tw);
                                        $(".tl_cert").val(data.data['tl_public']);
                                        $(".tl_certkey").val(data.data['tl_private']);
                                        if (tl_tw){
                                            $(".J-tltw").show();
                                        }else{
                                            $(".J-tltw").hide();
                                        }
                                    }
                                }
                            });
                        });
                    }
                }
                //app
                if ((type == 'app')) {
                    if (tl_wap && tl_mp) {
                        util.alertTwo('检测到商城已存在配置,如果配置信息与其一致，可直接同步相应配置信息',
                            '同步网页端',function () {
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/Config/synTLPayConfig')}",
                                    'data':{type:'wap','target_type':type},
                                    'type':'post',
                                    success:function(data){
                                        if(data.data) {
                                            $("#tl_cusid").val(data.data['tl_cusid']);
                                            $("#tl_key").val(data.data['tl_key']);
                                            $("#tl_appid").val(data.data['tl_appid']);
                                            $("#tl_username").val(data.data['tl_username']);
                                            $("#tl_id").val(data.data['tl_id']);
                                            $("#tl_password").val(data.data['tl_password']);
                                            var is_open = data.data['ali_cert_type'] == 0? false: true;
                                            $("#ali_cert_type").prop("checked", is_open);
                                            var tl_tw = data.data['tl_tw'] ? true : false;
                                            $("#tltw_is_use").prop("checked", tl_tw);
                                            $(".tl_cert").val(data.data['tl_public']);
                                            $(".tl_certkey").val(data.data['tl_private']);
                                            if (tl_tw){
                                                $(".J-tltw").show();
                                            }else{
                                                $(".J-tltw").hide();
                                            }
                                        }
                                    }
                                });
                            },
                            '同步小程序端',function () {
                                $.ajax({
                                    'url':"{:__URL('PLATFORM_MAIN/Config/synTLPayConfig')}",
                                    'data':{type:'mp','target_type':type},
                                    'type':'post',
                                    success:function(data){
                                        if(data.data) {
                                            $("#tl_cusid").val(data.data['tl_cusid']);
                                            $("#tl_key").val(data.data['tl_key']);
                                            $("#tl_appid").val(data.data['tl_appid']);
                                            $("#tl_username").val(data.data['tl_username']);
                                            $("#tl_id").val(data.data['tl_id']);
                                            $("#tl_password").val(data.data['tl_password']);
                                            var is_open = data.data['ali_cert_type'] == 0? false: true;
                                            $("#ali_cert_type").prop("checked", is_open);
                                            var tl_tw = data.data['tl_tw'] ? true : false;
                                            $("#tltw_is_use").prop("checked", tl_tw);
                                            $(".tl_cert").val(data.data['tl_public']);
                                            $(".tl_certkey").val(data.data['tl_private']);
                                            if (tl_tw){
                                                $(".J-tltw").show();
                                            }else{
                                                $(".J-tltw").hide();
                                            }
                                        }
                                    }
                                });
                            }
                        )
                    }else if(tl_wap){
                        util.alert('检测到商城已配置商户号为：'+tl_wap+'的通联信息，如APP端通联商户号与其一致，可直接同步配置信息。', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synTLPayConfig')}",
                                'data':{type:'wap','target_type':type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#tl_cusid").val(data.data['tl_cusid']);
                                        $("#tl_key").val(data.data['tl_key']);
                                        $("#tl_appid").val(data.data['tl_appid']);
                                        $("#tl_username").val(data.data['tl_username']);
                                        $("#tl_id").val(data.data['tl_id']);
                                        $("#tl_password").val(data.data['tl_password']);
                                        var is_open = data.data['ali_cert_type'] == 0? false: true;
                                        $("#ali_cert_type").prop("checked", is_open);
                                        var tl_tw = data.data['tl_tw'] ? true : false;
                                        $("#tltw_is_use").prop("checked", tl_tw);
                                        $(".tl_cert").val(data.data['tl_public']);
                                        $(".tl_certkey").val(data.data['tl_private']);
                                        if (tl_tw){
                                            $(".J-tltw").show();
                                        }else{
                                            $(".J-tltw").hide();
                                        }
                                    }
                                }
                            });
                        });
                    }else if(tl_mp){
                        util.alert('检测到商城已配置商户号为：'+tl_mp+'的通联信息，如APP端通联商户号与其一致，可直接同步配置信息。', function () {
                            $.ajax({
                                'url':"{:__URL('PLATFORM_MAIN/Config/synTLPayConfig')}",
                                'data':{type:'mp','target_type':type},
                                'type':'post',
                                success:function(data){
                                    if(data.data) {
                                        $("#tl_cusid").val(data.data['tl_cusid']);
                                        $("#tl_key").val(data.data['tl_key']);
                                        $("#tl_appid").val(data.data['tl_appid']);
                                        $("#tl_username").val(data.data['tl_username']);
                                        $("#tl_id").val(data.data['tl_id']);
                                        $("#tl_password").val(data.data['tl_password']);
                                        var is_open = data.data['ali_cert_type'] == 0? false: true;
                                        $("#ali_cert_type").prop("checked", is_open);
                                        var tl_tw = data.data['tl_tw'] ? true : false;
                                        $("#tltw_is_use").prop("checked", tl_tw);
                                        $(".tl_cert").val(data.data['tl_public']);
                                        $(".tl_certkey").val(data.data['tl_private']);
                                        if (tl_tw){
                                            $(".J-tltw").show();
                                        }else{
                                            $(".J-tltw").hide();
                                        }
                                    }
                                }
                            });
                        });
                    }
                }
            }
        });

        function getBankList() {
            $.ajax({
                type: "get",
                url: "{:__URL('PLATFORM_MAIN/config/getBankList')}",
                async: true,
                success: function (data) {
                    if (data['code'] == 1) {
                        if (data['data'].length > 0) {
                            var html = '';
                            data['data'].forEach((item, index) => {
                                html += '<div class="bankList" style="border-bottom: 1px solid #eee;padding-bottom: 5px;margin-bottom: 5px;">';
                                html += '<img src="' + item.bank_iocn + '" style="width:40px;height: 40px;">' +
                                    '<span style="margin-left: 11px;font-size: 14px;">' + item.bank_short_name + '</span>';
                                html += '</div>';
                            });
                            $("#bankList-group").append(html);
                        }
                    }
                }
            });
        }
        //银行卡列表
        $('body').on('click', '.pay_bankList', function () {
            var html = '<div class="bankList-group" id="bankList-group">';
            html += '</div>';
            getBankList();
            util.confirm('支持银行', html, function () {
            });
        });
        $('body').on('click','.increment', function () {
            var addons_id = "{$thirdpay_addons_id}";
            var is_value_add = "{$thirdpay_is_value_add}";
            var up_status = "{$thirdpay_up_status}";
            if(is_value_add == 1 && up_status != 2) {
                var url=  __URL(PLATFORMMAIN + '/addonslist/increment&addons_id='+addons_id+'&type=1');
                util.confirm1('增值应用','url:'+url,'.xlarge',function(){
                })
            }else if(up_status == 2) {
                var url=  __URL(PLATFORMMAIN + '/addonslist/increment&addons_id='+addons_id+'&type=3');
                util.confirm1('即将上线','url:'+url,'.xlarge',function(){
                })
            }else{
                var url=  __URL(PLATFORMMAIN + '/addonslist/increment&addons_id='+addons_id+'&type=2');
                util.confirm1('未订购应用','url:'+url,'.xlarge',function(){
                })
            }
        });
    });

</script>
{/block}